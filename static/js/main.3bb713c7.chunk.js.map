{"version":3,"sources":["theme.js","ui/AppTools.js","ui/DrawerMenu.js","ui/OptSelector.js","ui/AnimSelector.js","ui/MainSelector.js","editor/View3D.js","App.js","reportWebVitals.js","index.js"],"names":["theme","createTheme","AppTools","AppBar","position","Toolbar","variant","IconButton","edge","color","onClick","this","props","toggleDrawer","Typography","Component","defaultProps","DrawerMenu","bind","save","state","isOpen","e","type","key","setState","fileFormat","currentTarget","dataset","value","console","error","Drawer","anchor","open","onClose","Box","p","component","Divider","List","ListItem","ListItemButton","ListItemIcon","ListItemText","primary","OptSelector","checkChange","radioChange","opts","map","o","idx","path","name","split","FormControlLabel","label","control","Checkbox","checked","visible","onChange","n","v","toggleElement","target","val","i","length","RadioGroup","renderRadios","Radio","optElements","Paper","sx","m","opacity","FormControl","FormLabel","renderCheckboxes","renderRadioSelect","AnimSelector","animFrameLabel","sliderChange","findSelected","animPoses","setAnimTime","frameTime","enabled","frames","lbl","Math","round","width","Slider","defaultValue","getAriaValueText","valueLabelDisplay","marks","min","max","step","toggleAnim","Fragment","renderAnimFrames","MainSelector","menuSelected","selectedOption","menu","optAnimations","toggleAnimation","setAnimationTime","showDone","disablePadding","showOptions","zIndex","top","mixins","toolbar","minHeight","bgcolor","borderRadius","renderDone","renderOptions","renderOptionsSelector","renderAnimSelector","View3D","refRenderer","React","createRef","animate","loaderOk","loaderAnimOk","loaderError","loaderProgress","onWindowResize","animations","exporterSTL","STLExporter","exporterOBJ","OBJExporter","clock","THREE","animMixer","animTime","scene","background","showGroundPlane","gp","depthWrite","rotation","x","PI","receiveShadow","add","hemiLight","set","dirLight1","dirLight2","dracoLoader","DRACOLoader","setDecoderPath","loadPath","loader","GLTFLoader","setDRACOLoader","ref","paddingTop","log","forSave","clone","remove","traverse","id","uuid","push","startsWith","forEach","getObjectById","parent","parse","binary","rsize","rendererDimensions","camera","height","y","z","renderer","antialias","setSize","current","appendChild","domElement","window","addEventListener","controls","OrbitControls","listenToKeyEvents","enableDamping","dampingFactor","screenSpacePanning","minDistance","maxDistance","maxPolarAngle","update","backgroundCube","loadBackgroundCube","loadObject","object3D","removeEventListener","d","innerWidth","innerHeight","rst","getComputedStyle","parseFloat","paddingLeft","paddingRight","paddingBottom","aspect","updateProjectionMatrix","filePath","load","undefined","filesCube","setPath","requestAnimationFrame","animSingleStep","setTime","mixerUpdateDelta","getDelta","render","glTF","loadedObject","grpOpt","findOptional","defaultOptional","omat","flatShading","bb","object","isMesh","material","expandByObject","showBoundingBox","box","showSkeleton","skeleton","cameraToBBox","availableElements","loadAnimation","xhr","loaded","total","anim","tracks","t","times","animDisableMove","filter","act","clipAction","play","action","animSelect","availableAnimations","elOpt","obj","groupOptional","sort","a","b","grp","elCur","elPrev","prevNameParts","curNameParts","el","time","fitOffset","size","center","getSize","getCenter","maxSize","fitHeightDistance","atan","fov","fitWidthDistance","distance","direction","sub","normalize","multiplyScalar","copy","near","far","App","elements","refDrawerMenu","refView3D","data","blobSTL","Blob","saveAs","blobOBJ","elNamePath","newGroups","group","groupElNamePath","isRadio","anims","process","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","ThemeProvider","CssBaseline","enableColorScheme","document","getElementById"],"mappings":"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","file":"static/js/main.3bb713c7.chunk.js","sourcesContent":["//import { red } from '@mui/material/colors';\nimport { createTheme } from '@mui/material/styles';\n\n// A custom theme for this app\nconst theme = createTheme({\n//\tpalette: {\n//\t\tprimary: {\n//\t\t\tmain: '#556cd6',\n//\t\t},\n//\t\tsecondary: {\n//\t\t\tmain: '#19857b',\n//\t\t},\n//\t\terror: {\n//\t\t\tmain: red.A400,\n//\t\t},\n//\t},\n});\n\nexport default theme;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport AppBar from '@mui/material/AppBar';\nimport Toolbar from '@mui/material/Toolbar';\nimport Typography from '@mui/material/Typography';\nimport IconButton from '@mui/material/IconButton';\nimport MenuIcon from '@mui/icons-material/Menu';\n\nclass AppTools extends Component {\n\n\trender() {\n\t\treturn (\n\t\t\t<AppBar position=\"fixed\">\n\t\t\t\t<Toolbar variant=\"regular\">\n\t\t\t\t\t<IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\" onClick={this.props.toggleDrawer}>\n\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t<Typography variant=\"h6\" color=\"inherit\">3D Print demo</Typography>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t);\n\t}\n}\n\nAppTools.defaultProps = {\n\ttoggleDrawer: null\n}\n\nAppTools.propTypes = {\n\ttoggleDrawer: PropTypes.func\n}\n\nexport default AppTools;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Divider from '@mui/material/Divider';\nimport Drawer from '@mui/material/Drawer';\nimport Box from '@mui/material/Box';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemButton from '@mui/material/ListItemButton';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport ListItemText from '@mui/material/ListItemText';\nimport Typography from '@mui/material/Typography';\nimport Save from '@mui/icons-material/Save';\n\nclass DrawerMenu extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.toggleDrawer = this.toggleDrawer.bind(this);\n\t\tthis.save = this.save.bind(this);\n\t\tthis.state = {\n\t\t\tisOpen: false\n\t\t}\n\t}\n\n\ttoggleDrawer(e) {\n\t\tif (e.type === 'keydown' && (e.key === 'Tab' || e.key === 'Shift')) {\n\t\t\treturn;\n\t\t}\n\t\tthis.setState({ isOpen: !this.state.isOpen });\n\t}\n\n\tsave(e) {\n\t\tif (null === this.props.save) {\n\t\t\tconsole.error(\"No save handler set\");\n\t\t\treturn;\n\t\t}\n\t\t// read from \"data-value\" attribute\n\t\tlet fileFormat = e.currentTarget.dataset.value;\n\t\tif (!fileFormat) {\n\t\t\tfileFormat = \"STL\" // default to STL format\n\t\t}\n\t\tthis.setState({ isOpen:false });\n\t\tthis.props.save(fileFormat);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Drawer anchor=\"left\" open={this.state.isOpen} onClose={this.toggleDrawer}>\n\t\t\t\t<Box p={1}>\n\t\t\t\t\t<Typography variant=\"h4\" component=\"h4\">Main menu</Typography>\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<List component=\"nav\" aria-label=\"main selector\">\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemButton onClick={this.save} data-value=\"STL\">\n\t\t\t\t\t\t\t\t<ListItemIcon><Save /></ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Save STL for print\" />\n\t\t\t\t\t\t\t</ListItemButton>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemButton onClick={this.save} data-value=\"OBJ\">\n\t\t\t\t\t\t\t\t<ListItemIcon><Save /></ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Save OBJ for print\" />\n\t\t\t\t\t\t\t</ListItemButton>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t</List>\n\t\t\t\t</Box>\n\t\t\t</Drawer>\n\t\t);\n\t}\n}\n\nDrawerMenu.defaultProps = {\n\tsave: null\n}\n\nDrawerMenu.propTypes = {\n\tsave: PropTypes.func\n}\n\nexport default DrawerMenu;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Paper from '@mui/material/Paper';\nimport FormLabel from '@mui/material/FormLabel';\nimport FormControl from '@mui/material/FormControl';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport Checkbox from '@mui/material/Checkbox';\nimport Radio from '@mui/material/Radio';\nimport RadioGroup from '@mui/material/RadioGroup';\n\nclass OptSelector extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.checkChange = this.checkChange.bind(this);\n\t\tthis.radioChange = this.radioChange.bind(this);\n\t}\n\n\trenderCheckboxes(opts) {\n\t\treturn opts.map((o, idx) => {\n\t\t\tlet path = o.name.split('_');\n\t\t\tlet name = path[1] + ' ' + path[2];\n\t\t\treturn (\n\t\t\t\t<FormControlLabel key={idx} label={name} value={o.name} control={<Checkbox checked={o.visible} onChange={this.checkChange}  />} />\n\t\t\t);\n\t\t});\n\t}\n\n\tcheckChange(e) {\n\t\tconst n = e.currentTarget.value;\n\t\tconst v = e.currentTarget.checked;\n\t\t//console.log(n, \"check change ->\", v);\n\t\tif (null !==  this.props.toggleElement) {\n\t\t\tthis.props.toggleElement({name:n, visible:v});\n\t\t}\n\t}\n\n\tradioChange(e) {\n\t\t//console.log(\"radio change ->\", e.target.value);\n\t\tif (null !==  this.props.toggleElement) {\n\t\t\tthis.props.toggleElement({name:e.target.value, visible:true});\n\t\t}\n\t}\n\n\trenderRadioSelect(opts) {\n\t\tlet val = '';\n\t\tfor (let i = 0; i < opts.length; i++) {\n\t\t\tif (opts[i].visible) {\n\t\t\t\tval = opts[i].name;\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<RadioGroup\n\t\t\t\taria-labelledby=\"demo-controlled-radio-buttons-group\"\n\t\t\t\tname=\"controlled-radio-buttons-group\"\n\t\t\t\tvalue={val}\n\t\t\t\tonChange={this.radioChange}>\n\t\t\t\t{this.renderRadios(opts)}\n\t\t\t</RadioGroup>\n\t\t);\n\t}\n\n\trenderRadios(opts) {\n\t\treturn opts.map((o, idx) => {\n\t\t\tlet path = o.name.split('_');\n\t\t\tlet name = path[1] + ' ' + path[2];\n\t\t\treturn (\n\t\t\t\t<FormControlLabel key={idx} label={name} value={o.name} control={<Radio />} />\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\treturn this.props.optElements.map((opts, idx) => {\n\t\t\tconst key = \"opt_\" + idx;\n\t\t\tconst label = opts[0].name.split('_')[1];\n\t\t\treturn (\n\t\t\t\t<Paper sx={{p: 1, m: 1, opacity: 0.8 }} key={key}>\n\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t<FormLabel component=\"legend\">{label}</FormLabel>\n\t\t\t\t\t\t{(1 === opts.length) ? this.renderCheckboxes(opts) : this.renderRadioSelect(opts)}\n\t\t\t\t\t</FormControl>\n\t\t\t\t</Paper>\n\t\t\t);\n\t\t});\n\t}\n}\n\nOptSelector.defaultProps = {\n\toptElements: [],\n\ttoggleElement: null\n}\n\nOptSelector.propTypes = {\n\toptElements: PropTypes.array,\n\ttoggleElement: PropTypes.func\n}\n\nexport default OptSelector;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Paper from '@mui/material/Paper';\nimport FormLabel from '@mui/material/FormLabel';\nimport FormControl from '@mui/material/FormControl';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport Radio from '@mui/material/Radio';\nimport RadioGroup from '@mui/material/RadioGroup';\nimport Slider from '@mui/material/Slider';\nimport Box from '@mui/material/Box';\n\nclass AnimSelector extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.animFrameLabel = this.animFrameLabel.bind(this);\n\t\tthis.radioChange = this.radioChange.bind(this);\n\t\tthis.sliderChange = this.sliderChange.bind(this);\n\t}\n\n\tsliderChange(e) {\n\t\tconst v = e.target.value;\n\t\tconst o = this.findSelected(this.props.animPoses);\n\t\tif (null !== this.props.setAnimTime) {\n\t\t\tthis.props.setAnimTime(v * o.frameTime);\n\t\t}\n\t}\n\n\tfindSelected(opts) {\n\t\tfor (let i = 0; i < opts.length; i++) {\n\t\t\tif (opts[i].enabled) {\n\t\t\t\treturn opts[i];\n\t\t\t}\t\t\t\n\t\t}\n\t\treturn null;\n\t}\n\n\tanimFrameLabel(value) {\n\t\treturn `${value} frame`;\n\t}\n\n\trenderAnimFrames(opts) {\n\t\t// find selected anim\n\t\tconst o = this.findSelected(opts);\n\t\tif (0 === o.frames) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst lbl = `SELECT FRAME (${o.frames} frm / ${Math.round(1 / o.frameTime, 2)}fps)`\n\n\t\treturn (\n\t\t\t<Paper sx={{p: 1, m: 1, opacity: 0.8 }}>\n\t\t\t\t\t<FormControl sx={{width: \"100%\"}}>\n\t\t\t\t\t\t<FormLabel component=\"legend\">{lbl}</FormLabel>\n\t\t\t\t\t\t<Box sx={{p: 1}}>\n\t\t\t\t\t\t\t<Slider\n\t\t\t\t\t\t\t\taria-label=\"Fames\"\n\t\t\t\t\t\t\t\tdefaultValue={0}\n\t\t\t\t\t\t\t\tgetAriaValueText={this.animFrameLabel}\n\t\t\t\t\t\t\t\tvalueLabelDisplay=\"auto\"\n\t\t\t\t\t\t\t\tmarks\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\tmax={o.frames-1}\n\t\t\t\t\t\t\t\tstep={1}\n\t\t\t\t\t\t\t\tonChange={this.sliderChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</FormControl>\n\t\t\t</Paper>\n\t\t);\n\t}\n\n\tradioChange(e) {\n\t\t//console.log(\"radio change ->\", e.target.value);\n\t\tif (null !==  this.props.toggleAnim) {\n\t\t\tthis.props.toggleAnim(e.target.value);\n\t\t}\n\t}\n\n\trenderRadioSelect(opts) {\n\t\t// find enabled\n\t\tlet val = '';\n\t\tfor (let i = 0; i < opts.length; i++) {\n\t\t\tif (opts[i].enabled) {\n\t\t\t\tval = opts[i].name;\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<RadioGroup\n\t\t\t\taria-labelledby=\"demo-controlled-radio-buttons-group\"\n\t\t\t\tname=\"controlled-radio-buttons-group\"\n\t\t\t\tvalue={val}\n\t\t\t\tonChange={this.radioChange}>\n\t\t\t\t{this.renderRadios(opts)}\n\t\t\t</RadioGroup>\n\t\t);\n\t}\n\n\trenderRadios(opts) {\n\t\treturn opts.map((o, idx) => {\n\t\t\treturn (\n\t\t\t\t<FormControlLabel key={idx} label={o.name} value={o.name} control={<Radio />} />\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\tconst opts = this.props.animPoses;\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t{this.renderAnimFrames(opts)}\n\t\t\t\t<Paper sx={{p: 1, m: 1, opacity: 0.8 }}>\n\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t<FormLabel component=\"legend\">SELECT POSE</FormLabel>\n\t\t\t\t\t\t{this.renderRadioSelect(opts)}\n\t\t\t\t\t</FormControl>\n\t\t\t\t</Paper>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nAnimSelector.defaultProps = {\n\tanimPoses: [],\n\ttoggleAnim: null,\n\tsetAnimTime: null\n}\n\nAnimSelector.propTypes = {\n\tanimPoses: PropTypes.array,\n\ttoggleAnim: PropTypes.func,\n\tsetAnimTime: PropTypes.func\n}\n\nexport default AnimSelector;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from '@mui/material/Box';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemButton from '@mui/material/ListItemButton';\nimport ListItemText from '@mui/material/ListItemText';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport AccessibilityNewIcon from '@mui/icons-material/AccessibilityNew';\nimport EditIcon from '@mui/icons-material/Edit';\nimport OptSelector from './OptSelector';\nimport AnimSelector from './AnimSelector';\n\nclass MainSelector extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.menuSelected = this.menuSelected.bind(this);\n\t\tthis.state = {\n\t\t\tselectedOption: \"\"\n\t\t}\n\t}\n\n\tmenuSelected(e) {\n\t\t// read from \"data-value\" attribute\n\t\tconst menu = e.currentTarget.dataset.value;\n\t\tthis.setState({ selectedOption:menu });\n\t}\n\n\trenderOptionsSelector() {\n\t\tif (this.state.selectedOption !== \"configure\") {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<OptSelector optElements={this.props.optElements} toggleElement={this.props.toggleElement} />\n\t\t);\n\t}\n\n\trenderAnimSelector() {\n\t\tif (this.state.selectedOption !== \"pose\") {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<AnimSelector animPoses={this.props.optAnimations} toggleAnim={this.props.toggleAnimation} setAnimTime={this.props.setAnimationTime} />\n\t\t);\n\t}\n\n\trenderDone(showDone) {\n\t\tif (!showDone) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<ListItem disablePadding>\n\t\t\t\t<ListItemButton onClick={this.menuSelected} data-value=\"\">\n\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t<ArrowBackIcon />\n\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t<ListItemText primary=\"DONE\" />\n\t\t\t\t</ListItemButton>\n\t\t\t</ListItem>\n\t\t);\n\t}\n\n\trenderOptions(showOptions) {\n\t\tif (!showOptions) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<ListItem disablePadding>\n\t\t\t\t\t<ListItemButton onClick={this.menuSelected} data-value=\"configure\">\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<EditIcon />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"CONFIGURE MODEL\" />\n\t\t\t\t\t</ListItemButton>\n\t\t\t\t</ListItem>\n\t\t\t\t<ListItem disablePadding>\n\t\t\t\t\t<ListItemButton onClick={this.menuSelected} data-value=\"pose\">\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<AccessibilityNewIcon />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"SELECT POSE\" />\n\t\t\t\t\t</ListItemButton>\n\t\t\t\t</ListItem>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst showDone = this.state.selectedOption !== \"\";\n\t\treturn (\n\t\t\t<Box sx={{ \n\t\t\t\twidth: 1/5,\n\t\t\t\tm: 2,\n\t\t\t\tzIndex: 'appBar', \n\t\t\t\tposition: 'absolute', \n\t\t\t\ttop: (theme) => theme.mixins.toolbar.minHeight + 'px'\n\t\t\t}}>\n\t\t\t\t<List sx={{ bgcolor: 'background.paper', opacity: 0.8, borderRadius: 1 }}>\n\t\t\t\t\t{this.renderDone(showDone)}\n\t\t\t\t\t{this.renderOptions(!showDone)}\n\t\t\t\t</List>\n\t\t\t\t{this.renderOptionsSelector()}\n\t\t\t\t{this.renderAnimSelector()}\n\t\t\t</Box>\n\t\t);\n\t}\n}\n\nMainSelector.defaultProps = {\n\toptElements: [],\n\ttoggleElement: null,\n\toptAnimations: [],\n\ttoggleAnimation: null,\n\tsetAnimationTime: null\n}\n\nMainSelector.propTypes = {\n\toptElements: PropTypes.array,\n\ttoggleElement: PropTypes.func,\n\toptAnimations: PropTypes.array,\n\ttoggleAnimation: PropTypes.func,\n\tsetAnimationTime: PropTypes.func\n}\n\nexport default MainSelector;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport * as THREE from \"three\";\nimport Box from '@mui/material/Box';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader.js';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport { STLExporter } from 'three/examples/jsm/exporters/STLExporter.js';\nimport { OBJExporter } from 'three/examples/jsm/exporters/OBJExporter.js';\n\nclass View3D extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.refRenderer = React.createRef();\n\t\t// methods\n\t\tthis.save = this.save.bind(this);\n\t\tthis.animate = this.animate.bind(this);\n\t\tthis.loaderOk = this.loaderOk.bind(this);\n\t\tthis.loaderAnimOk = this.loaderAnimOk.bind(this);\n\t\tthis.loaderError = this.loaderError.bind(this);\n\t\tthis.loaderProgress = this.loaderProgress.bind(this);\n\t\tthis.toggleElement = this.toggleElement.bind(this);\n\t\tthis.setAnimationTime = this.setAnimationTime.bind(this);\n\t\tthis.onWindowResize = this.onWindowResize.bind(this);\n\t\tthis.animations = [];\n\n\t\t// Init exporters\n\t\tthis.exporterSTL = new STLExporter();\n\t\tthis.exporterOBJ = new OBJExporter();\n\n\t\t// init animation clock\n\t\tthis.clock = new THREE.Clock();\n\t\tthis.animMixer = null;\n\t\tthis.animTime = 0;\n\n\t\t// Init default scene\n\t\tthis.scene = new THREE.Scene();\n\t\tthis.scene.background = new THREE.Color( 0xafafaf );\n\t\t//this.scene.fog = new THREE.Fog( 0xa0a0a0, 10, 50 );\n\n\t\t// ground plane\n\t\tif (this.props.showGroundPlane) {\n\t\t\tconst gp = new THREE.Mesh(\n\t\t\t\tnew THREE.PlaneGeometry(2, 2),\n\t\t\t\tnew THREE.MeshPhongMaterial( { color: 0x888888, depthWrite: false } ) \n\t\t\t);\n\t\t\tgp.rotation.x = - Math.PI / 2;\n\t\t\tgp.receiveShadow = true;\n\t\t\tgp.name = \"hlp_ground_plane\";\n\t\t\tthis.scene.add(gp);\n\t\t}\n\n\t\t// Ligts from example\n\t\tconst hemiLight = new THREE.HemisphereLight( 0xffffff, 0x444444 );\n\t\themiLight.position.set( 0, 20, 0 );\n\t\tthis.scene.add( hemiLight );\n\n\t\t//const dirLight = new THREE.DirectionalLight( 0xffffff );\n\t\t//dirLight.position.set( - 3, 10, - 10 );\n\t\t//dirLight.castShadow = true;\n\t\t//dirLight.shadow.camera.top = 2;\n\t\t//dirLight.shadow.camera.bottom = - 2;\n\t\t//dirLight.shadow.camera.left = - 2;\n\t\t//dirLight.shadow.camera.right = 2;\n\t\t//dirLight.shadow.camera.near = 0.1;\n\t\t//dirLight.shadow.camera.far = 40;\n\t\t//this.scene.add( dirLight );\n\t\t\n\t\tthis.dirLight1 = new THREE.DirectionalLight( 0xffffff );\n\t\tthis.dirLight1.position.set( 2, 2, 2 );\n\t\tthis.scene.add( this.dirLight1 );\n\n\t\tthis.dirLight2 = new THREE.DirectionalLight( 0xffffff );\n\t\tthis.dirLight2.position.set( -2, -2, -2 );\n\t\tthis.scene.add( this.dirLight2 );\n\n\t\t//this.ambientLight = new THREE.AmbientLight( 0x222222 );\n\t\t//this.scene.add( this.ambientLight );\n\n\t\t// glTF decompressor, with path for decompression lib loading\n\t\tconst dracoLoader = new DRACOLoader()\n\t\tdracoLoader.setDecoderPath(props.loadPath + '/libs/draco/')\n\t\t//dracoLoader.setDecoderConfig({type: 'js'});\t// (Optional) Override detection of WASM support.\n\t\t// init object loader with decompressor\n\t\tthis.loader = new GLTFLoader();\n\t\tthis.loader.setDRACOLoader(dracoLoader)\n\t}\n\n\t// just empty div to add renderer\n\trender() {\n\t\t// this is to make container below toolbar\n\t\t// theme access is possible through function generating sx\n\t\treturn (\n\t\t\t<Box\n\t\t\t\tref={this.refRenderer} \n\t\t\t\tsx={{\n\t\t\t\t\tpaddingTop: (theme) => theme.mixins.toolbar.minHeight + 'px'\n\t\t\t\t}} \n\t\t\t/>\n\t\t);\n\t}\n\n\t// extract scene and save object\n\tsave(fileFormat) {\n\t\tconsole.log(\"Saving object\");\n\t\t// clone scene to remove hidden\n\t\tlet forSave = this.scene.clone();\n\t\t// find invisible to remove\n\t\tlet remove = [];\n\t\tforSave.traverse(function(o){\n\t\t\tif (!o.visible) {\n\t\t\t\tconsole.log(\"To remove\", o.name, o.id, o.uuid);\n\t\t\t\tremove.push(o.id);\n\t\t\t}\n\t\t\tif (o.name.startsWith('hlp_')) {\n\t\t\t\tremove.push(o.id);\n\t\t\t}\n\t\t});\n\t\t// finally remove invisible\n\t\tremove.forEach(id => {\n\t\t\tlet o = forSave.getObjectById(id);\n\t\t\to.parent.remove(o);\n\t\t});\n\t\t// return cleaned\n\t\tswitch (fileFormat) {\n\t\t\tcase \"OBJ\":\n\t\t\t\treturn this.exporterOBJ.parse(forSave)\n\t\t\tcase \"STL\":\n\t\t\tdefault:\n\t\t\t\treturn this.exporterSTL.parse(forSave, {binary:true});\n\t\t}\n\t}\n\n\t// init three.js renderer\n\tcomponentDidMount() {\n\t\t// renderer element\n\t\tconst rsize = this.rendererDimensions();\n\n\t\t// setup camera\n\t\tthis.camera = new THREE.PerspectiveCamera( 75, rsize.width / rsize.height, 0.01, 100 );\n\t\tthis.camera.position.y = 0.20;\n\t\tthis.camera.position.z = 0.10;\n\n\t\tthis.renderer = new THREE.WebGLRenderer({ antialias: true });\n\t\t//this.renderer.setPixelRatio( window.devicePixelRatio );\t// doubles pixels?!?\n\t\tthis.renderer.setSize(rsize.width, rsize.height);\n\t\t//this.renderer.shadowMap.enabled = true;\n\t\t// use ref as a mount point of the Three.js scene instead of the document.body\n\t\tthis.refRenderer.current.appendChild( this.renderer.domElement );\n\t\t// Add handler for resizing\n\t\twindow.addEventListener( 'resize', this.onWindowResize );\n\n\t\t// controls\n\t\tthis.controls = new OrbitControls( this.camera, this.renderer.domElement );\n\t\tthis.controls.listenToKeyEvents( window ); // optional\n\t\tthis.controls.enableDamping = true; // an animation loop is required when either damping or auto-rotation are enabled\n\t\tthis.controls.dampingFactor = 0.05;\n\t\tthis.controls.screenSpacePanning = false;\n\t\tthis.controls.minDistance = 0.22;\n\t\tthis.controls.maxDistance = 2;\n\t\tthis.controls.maxPolarAngle = Math.PI / 2;\n\t\tthis.controls.target = new THREE.Vector3(0, 0.15, 0);\n\t\tthis.controls.update();\n\n\t\t// start animation\n\t\tthis.animate();\n\n\t\t// can we load\n\t\tif (null === this.props.loadPath) {\n\t\t\treturn;\n\t\t}\n\t\t// kickstart loading\n\t\tif (this.props.backgroundCube.length > 0) {\n\t\t\tthis.scene.background = this.loadBackgroundCube(this.props.backgroundCube);\n\t\t}\n\n\t\t//const reflectionCube = this.loadBackgroundCube(this.props.backgroundCube);\n\t\t//this.cubeMaterial1 = new THREE.MeshLambertMaterial( { color: 0xffffff, envMap: reflectionCube } );\n\n\t\tthis.loadObject(this.props.object3D);\n\t}\n\n\tcomponentWillUnmount() {\n\t\t// remove handler for resizing\n\t\twindow.removeEventListener( 'resize', this.onWindowResize );\n\t}\n\n\trendererDimensions(){\n\t\tlet d = {\n\t\t\t//width: this.refRenderer.current.clientWidth,\n\t\t\twidth: window.innerWidth,\n\t\t\t//height: this.refRenderer.current.clientHeight\n\t\t\theight: window.innerHeight\n\t\t}\n\t\tlet rst = getComputedStyle(this.refRenderer.current);\n\t\td.width -= parseFloat(rst.paddingLeft) + parseFloat(rst.paddingRight);\n\t\td.height -= parseFloat(rst.paddingTop) + parseFloat(rst.paddingBottom);\n\t\t//console.log(d);\n\t\treturn d;\n\t}\n\n\t// TODO: fix resizing \n\tonWindowResize() {\n\t\tconst rsize = this.rendererDimensions();\n\t\tthis.camera.aspect = rsize.width / rsize.height;\n\t\tthis.camera.updateProjectionMatrix();\n\t\tthis.renderer.setSize( rsize.width, rsize.height );\n\t}\n\n\n\tloadObject(filePath){\n\t\tif (null === filePath) {\n\t\t\treturn;\n\t\t}\n\t\tthis.loader.load(\n\t\t\tthis.props.loadPath + filePath,\n\t\t\tthis.loaderOk,\n\t\t\tundefined, //this.loaderProgress,\n\t\t\tthis.loaderError\n\t\t);\n\t}\n\n\n\tloadAnimation(filePath) {\n\t\tif (null === filePath) {\n\t\t\treturn;\n\t\t}\n\t\tthis.loader.load(\n\t\t\tthis.props.loadPath + filePath,\n\t\t\tthis.loaderAnimOk,\n\t\t\tundefined, //this.loaderProgress,\n\t\t\tthis.loaderError\n\t\t);\n\t}\n\n\n\tloadBackgroundCube(filesCube) {\n\t\tif (null === filesCube) {\n\t\t\treturn;\n\t\t}\n\t\treturn new THREE.CubeTextureLoader()\n\t\t\t.setPath(this.props.loadPath)\n\t\t\t.load(filesCube);\n\t}\n\n\tanimate() {\n\t\trequestAnimationFrame( this.animate );\n\n\t\t// only when object is loaded and we have mixer\n\t\tif (null !== this.animMixer) {\n\t\t\tif (this.props.animSingleStep) {\n\t\t\t\t// for single step use time set\n\t\t\t\tthis.animMixer.setTime(this.animTime);\n\t\t\t} else {\n\t\t\t\t// Get the time elapsed since the last frame, used for mixer update (if not in single step mode)\n\t\t\t\tlet mixerUpdateDelta = this.clock.getDelta();\n\t\t\t\t// Update the animation mixer, the stats panel, and render this frame\n\t\t\t\tthis.animMixer.update( mixerUpdateDelta / 2 );\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.renderer.render( this.scene, this.camera );\n\t};\n\n\t// called when object is loaded\n\tloaderOk(glTF) {\n\t\tconsole.log(\"Object loaded\");\n\t\t//console.log(glTF);\n\t\tthis.loadedObject = glTF.scene;\n\n\t\t// find optional elements\n\t\tlet grpOpt = this.findOptional();\n\t\t// preselect optional elements\n\t\tthis.defaultOptional(grpOpt);\n\n\t\tconst omat = new THREE.MeshPhongMaterial( { color: 0x226622, flatShading: true } )\n\t\t// enable shadow and set material, must have directional light, calc bounding box\n\t\tlet bb = new THREE.Box3();\n\t\tthis.loadedObject.traverse( function(object) {\n\t\t\tif ( !object.isMesh ) { return; }\n\t\t\t//object.castShadow = true;\n\t\t\tobject.material = omat;\n\t\t\t// calc bounding box\n\t\t\tbb.expandByObject(object);\n\t\t});\n\n\t\t// display bounding box\n\t\tif (this.props.showBoundingBox) {\n\t\t\tconst box = new THREE.Box3Helper(bb, 0xff0000)\n\t\t\tbox.name = \"hlp_bounding_box\";\n\t\t\tthis.scene.add( box );\n\t\t}\n\n\t\t// visible skeleton\n\t\tif (this.props.showSkeleton) {\n\t\t\tconst skeleton = new THREE.SkeletonHelper(this.loadedObject);\n\t\t\tskeleton.name = 'hlp_skeleton';\n\t\t\tskeleton.visible = true;\n\t\t\tthis.scene.add( skeleton );\n\t\t}\n\n\t\t// adjust camera to object loaded\n\t\tthis.cameraToBBox(bb, this.camera, this.controls, 1.0);\n\n\t\t// set scene for display\n\t\tthis.scene.add(this.loadedObject);\n\n\t\t// create mixer for animations\n\t\tthis.animMixer = new THREE.AnimationMixer(this.loadedObject);\n\t\t\n\t\t// Call changed list of models\n\t\tif (null !== this.props.availableElements) {\n\t\t\tthis.props.availableElements(grpOpt);\n\t\t}\n\n\t\t// clear all previous animations\n\t\tthis.animations = [];\n\t\t// call animation loading\n\t\tfor (let i = 0; i < this.props.animPoses.length; i++) {\n\t\t\t//console.log(\"Loading anim\", this.props.animPoses[i]);\n\t\t\tthis.loadAnimation(this.props.animPoses[i]);\n\t\t}\n\t}\n\n\t// called while loading is progressing\n\tloaderProgress (xhr) {\n\t\tconsole.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );\n\t}\n\n\t// called when object load fails\n\tloaderError(error) {\n\t\tconsole.error(error);\n\t}\n\n\t// animation is loaded\n\tloaderAnimOk(glTF) {\n\t\tconsole.log(glTF);\n\t\t// init action\n\t\tconst anim = glTF.animations[0];\n\n\t\t// find max frame count and frame time\n\t\tlet frames = 0;\n\t\tlet frameTime = 0;\n\t\tanim.tracks.forEach((t) => {\n\t\t\tif (t.times.length > frames) {\n\t\t\t\tframes = t.times.length;\n\t\t\t\tframeTime = t.times[0];\n\t\t\t}\n\t\t});\n\n\t\t// remove model positioning\n\t\tif (this.props.animDisableMove) {\n\t\t\tanim.tracks = anim.tracks.filter(t => t.name !== \"mixamorigHips.position\")\n\t\t}\n\n\t\tconst act = this.animMixer.clipAction(anim);\n\t\tact.enabled = false;\n\t\tact.play();\n\n\t\t// add animation to list\n\t\tthis.animations.push({\n\t\t\tname: anim.name,\n\t\t\taction: act,\n\t\t\tframes: frames,\n\t\t\tframeTime: frameTime\n\t\t});\n\n\t\t// check all loaded to push list\n\t\tif (this.props.animPoses.length !== this.animations.length) {\n\t\t\treturn;\n\t\t}\n\n\t\t// crate anim selection\n\t\tlet animSelect = [];\n\t\tanimSelect.push({\n\t\t\tname: 'None', \n\t\t\tenabled: true,\n\t\t\tframes: 0,\n\t\t\tframeTime: 0\n\t\t});\n\t\tfor (let i = 0; i < this.animations.length; i++) {\n\t\t\tanimSelect.push({\n\t\t\t\tname: this.animations[i].name,\n\t\t\t\tenabled: false,\n\t\t\t\tframes: this.animations[i].frames,\n\t\t\t\tframeTime: this.animations[i].frameTime\n\t\t\t});\n\t\t}\n\t\tif (null !== this.props.availableAnimations) {\n\t\t\tthis.props.availableAnimations(animSelect);\n\t\t}\n\t}\n\n\t// finds optional objects, and hide them \n\t// only hides objects starting with name prefix \"opt_\"\n\tfindOptional() {\n\t\tlet elOpt=[];\n\t\tthis.loadedObject.traverse( function(obj) {\n\t\t\t// skip non optional objects\n\t\t\tif (!obj.name.startsWith(\"opt_\")) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// hide optional objects\n\t\t\tobj.visible = false;\n\t\t\t// add to list for hide/show\n\t\t\telOpt.push({\n\t\t\t\tname: obj.name,\n\t\t\t\tvisible: false\n\t\t\t});\n\t\t});\n\n\t\treturn this.groupOptional(elOpt);\n\t}\n\n\t// Groups all optional elements for selection UI\n\tgroupOptional(elOpt) {\n\t\tlet grpOpt = [];\n\t\tif (0 === elOpt.length) {\n\t\t\treturn grpOpt;\n\t\t}\n\t\t// sort before grouping\n\t\telOpt.sort((a,b) => {\n\t\t\tif (a.name < b.name) { return -1; }\n\t\t\tif (a.name > b.name) { return 1; }\n\t\t\treturn 0;\n\t\t});\n\n\t\tlet grp = [];\n\t\tlet elCur = elOpt[0];\n\t\tlet elPrev = elCur;\n\t\tgrp.push(elCur);\n\n\t\tfor (let i = 1; i < elOpt.length; i++) {\n\t\t\telCur = elOpt[i];\n\n\t\t\t// split names to get category info\n\t\t\t// 2nd is category if matches it is same category\n\t\t\tlet prevNameParts = elPrev.name.split('_');\n\t\t\tlet curNameParts = elCur.name.split('_');\n\n\t\t\t// check for different category\n\t\t\tif (prevNameParts[1] !== curNameParts[1]) {\n\t\t\t\tgrpOpt.push(grp);\n\t\t\t\tgrp = [];\n\t\t\t}\n\n\t\t\tgrp.push(elCur);\n\t\t\telPrev = elCur;\n\t\t}\n\n\t\tgrpOpt.push(grp);\n\t\treturn grpOpt;\n\t}\n\n\t// makes default selection\n\tdefaultOptional(grpOpt) {\n\t\tfor (let i = 0; i < grpOpt.length; i++) {\n\t\t\t// skip preselect when only one optional element in group\n\t\t\tif (1 === grpOpt[i].length) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t// preselect first in group\n\t\t\tgrpOpt[i][0].visible = true;\n\t\t\tthis.toggleElement(grpOpt[i][0]);\n\t\t}\n\t}\n\n\t// toggle visible element, check for traversing scene..\n\t// https://github.com/mrdoob/three.js/blob/dev/examples/jsm/exporters/STLExporter.js\n\ttoggleElement(el) {\n\t\tconsole.log(\"Toggle visible\", el);\n\t\tthis.loadedObject.traverse( function(obj) {\n\t\t\tif (obj.name === el.name) {\n\t\t\t\tobj.visible = el.visible;\n\t\t\t}\n\t\t});\n\t}\n\n\ttoggleAnimation(name) {\n\t\tconsole.log(\"Toggle animation\", name);\n\t\tfor (let i = 0; i < this.animations.length; i++) {\n\t\t\tthis.animations[i].action.enabled = this.animations[i].name === name;\n\t\t}\n\t\t// reset current animation position\n\t\tthis.animTime = 0;\n\t}\n\n\tsetAnimationTime(time) {\n\t\tthis.animTime = time;\n\t}\n\n\t// point camera and controls to bounding box\n\tcameraToBBox(box, camera, controls, fitOffset = 1.2) {\n\t\tconst size = new THREE.Vector3();\n\t\tconst center = new THREE.Vector3();\n\t\tbox.getSize(size);\n\t\tbox.getCenter(center );\n\n\t\tconst maxSize = Math.max(size.x, size.y, size.z);\n\t\tconst fitHeightDistance = maxSize / (2 * Math.atan(Math.PI * camera.fov / 360));\n\t\tconst fitWidthDistance = fitHeightDistance / camera.aspect;\n\t\tconst distance = fitOffset * Math.max(fitHeightDistance, fitWidthDistance);\n\n\t\tconst direction = controls.target.clone()\n\t\t\t.sub(camera.position)\n\t\t\t.normalize()\n\t\t\t.multiplyScalar(distance);\n\n\t\tcontrols.maxDistance = distance * 10;\n\t\tcontrols.target.copy(center);\n\n\t\tcamera.near = distance / 100;\n\t\tcamera.far = distance * 100;\n\t\tcamera.updateProjectionMatrix();\n\n\t\tcamera.position.copy(controls.target).sub(direction);\n\n\t\tcontrols.update();\n\t}\n}\n\nView3D.defaultProps = {\n\tloadPath: null,\n\tobject3D: null,\n\tanimPoses: null,\n\tshowBoundingBox: false,\n\tshowSkeleton: false,\n\tshowGroundPlane: true,\n\tbackgroundCube: null,\n\tavailableElements: null,\n\tavailableAnimations: null,\n\tanimSingleStep: true,\n\tanimDisableMove: true\n}\n\nView3D.propTypes = {\n\tloadPath: PropTypes.string,\n\tobject3D: PropTypes.string,\n\tanimPoses: PropTypes.array,\n\tshowBoundingBox: PropTypes.bool,\n\tshowSkeleton: PropTypes.bool,\n\tshowGroundPlane: PropTypes.bool,\n\tbackgroundCube: PropTypes.array,\n\tavailableElements: PropTypes.func,\n\tavailableAnimations: PropTypes.func,\n\tanimSingleStep: PropTypes.bool,\n\tanimDisableMove: PropTypes.bool\n}\n\nexport default View3D;","import React, { Component } from 'react';\nimport AppTools from './ui/AppTools';\nimport DrawerMenu from './ui/DrawerMenu';\nimport MainSelector from './ui/MainSelector';\nimport View3D from './editor/View3D';\nimport { saveAs } from 'file-saver';\n\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\telements: [],\n\t\t\tanimations: []\n\t\t}\n\t\tthis.refDrawerMenu = React.createRef();\n\t\tthis.refView3D = React.createRef();\n\t\tthis.toggleDrawer = this.toggleDrawer.bind(this);\n\t\tthis.save = this.save.bind(this);\n\t\tthis.availableElements = this.availableElements.bind(this);\n\t\tthis.toggleElement = this.toggleElement.bind(this);\n\t\tthis.availableAnimations = this.availableAnimations.bind(this);\n\t\tthis.toggleAnimation = this.toggleAnimation.bind(this);\n\t\tthis.setAnimationTime = this.setAnimationTime.bind(this);\n\t}\n\n\ttoggleDrawer(e) {\n\t\tthis.refDrawerMenu.current.toggleDrawer(e);\n\t}\n\n\tsave(fileFormat) {\n\t\t// get data from scene\n\t\tlet data = this.refView3D.current.save(fileFormat);\n\t\t//console.log(\"Data for save ->\", data);\n\t\tswitch (fileFormat) {\n\t\t\tcase \"STL\":\n\t\t\t\tlet blobSTL = new Blob( [data], { type : 'application/octet-stream' } ); \n\t\t\t\tsaveAs(blobSTL, \"for-print.stl\");\n\t\t\t\tbreak;\n\t\t\tcase \"OBJ\":\n\t\t\t\tlet blobOBJ = new Blob( [ data ], { type: 'text/plain' } );\n\t\t\t\tsaveAs(blobOBJ, \"for-print.obj\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log(\"Unsupported file format ->\",fileFormat);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Set list of elements to hide and show\n\tavailableElements(elements) {\n\t\tthis.setState({elements:elements});\n\t}\n\n\ttoggleElement(el) {\n\t\tconst elNamePath = el.name.split('_');\n\t\tlet newGroups = this.state.elements.map((group)=> {\n\t\t\t// check if same group on first element\n\t\t\tconst groupElNamePath = group[0].name.split('_');\n\t\t\t// Not same group skip check\n\t\t\tif (elNamePath[1] !== groupElNamePath[1]) {\n\t\t\t\treturn group\n\t\t\t}\n\n\t\t\tconst isRadio = group.length > 1;\n\t\t\treturn group.map((e) => {\n\t\t\t\t// change state of element\n\t\t\t\tif (e.name === el.name) {\n\t\t\t\t\te.visible = el.visible;\n\t\t\t\t\tthis.refView3D.current.toggleElement(e);\n\t\t\t\t} else {\n\t\t\t\t\t// when is radio selection toggle invert previous selection\n\t\t\t\t\tif (isRadio) {\n\t\t\t\t\t\te.visible = !el.visible;\n\t\t\t\t\t\tthis.refView3D.current.toggleElement(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn e;\n\t\t\t});\n\t\t});\n\t\tthis.setState({elements:newGroups});\n\t}\n\n\t// Set list of animations for selection\n\tavailableAnimations(animations) {\n\t\tthis.setState({animations:animations});\n\t}\n\t\n\ttoggleAnimation(name) {\n\t\tlet anims = this.state.animations.map((a) => {\n\t\t\ta.enabled = a.name === name;\n\t\t\treturn a;\n\t\t})\n\t\tthis.refView3D.current.toggleAnimation(name);\n\t\tthis.setState({animations:anims});\n\t}\n\n\tsetAnimationTime(time) {\n\t\tthis.refView3D.current.setAnimationTime(time);\n\t}\n\n\trender() {\n\t\t// Cubemaps\n\t\tconst bgCube=[];\n\t\t//const bgCube=[\n\t\t//\t'/textures/Brudslojan/posx.jpg',\n\t\t//\t'/textures/Brudslojan/negx.jpg',\n\t\t//\t'/textures/Brudslojan/posy.jpg',\n\t\t//\t'/textures/Brudslojan/negy.jpg',\n\t\t//\t'/textures/Brudslojan/posz.jpg',\n\t\t//\t'/textures/Brudslojan/negz.jpg'\n\t\t//];\n\n\t\tconst animPoses=[\n\t\t\t'/anims/fire_rifle.gltf',\n\t\t\t'/anims/hit_reaction.gltf',\n\t\t\t'/anims/reloading.gltf',\n\t\t\t'/anims/rifle_aiming.gltf',\n\t\t\t'/anims/rifle_jump.gltf',\n\t\t\t'/anims/rifle_run.gltf',\n\t\t\t'/anims/run_backwards.gltf',\n\t\t\t'/anims/starfe_left.gltf',\n\t\t\t'/anims/starfe_right.gltf',\n\t\t\t'/anims/toss_grenade.gltf',\n\t\t\t'/anims/turn_left.gltf',\n\t\t\t'/anims/turn_right.gltf',\n\t\t\t'/anims/walking_backwards.gltf',\n\t\t\t'/anims/walking.gltf'\n\t\t];\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<AppTools toggleDrawer={this.toggleDrawer} />\n\t\t\t\t<DrawerMenu ref={this.refDrawerMenu} save={this.save} />\n\t\t\t\t<View3D ref={this.refView3D} loadPath={process.env.PUBLIC_URL} \n\t\t\t\t\tobject3D=\"/objects/rhodesia-solider.glb\"\n\t\t\t\t\tbackgroundCube={bgCube}\n\t\t\t\t\tanimPoses={animPoses}\n\t\t\t\t\tavailableElements={this.availableElements}\n\t\t\t\t\tavailableAnimations={this.availableAnimations} />\n\t\t\t\t<MainSelector \n\t\t\t\t\toptElements={this.state.elements}\n\t\t\t\t\ttoggleElement={this.toggleElement}\n\t\t\t\t\toptAnimations={this.state.animations}\n\t\t\t\t\ttoggleAnimation={this.toggleAnimation}\n\t\t\t\t\tsetAnimationTime={this.setAnimationTime} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n\tif (onPerfEntry && onPerfEntry instanceof Function) {\n\t\timport('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n\t\t\tgetCLS(onPerfEntry);\n\t\t\tgetFID(onPerfEntry);\n\t\t\tgetFCP(onPerfEntry);\n\t\t\tgetLCP(onPerfEntry);\n\t\t\tgetTTFB(onPerfEntry);\n\t\t});\n\t}\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport { ThemeProvider } from '@mui/material/styles';\nimport theme from './theme';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<ThemeProvider theme={theme}>\n\t\t\t<CssBaseline enableColorScheme />\n\t\t\t{/* The rest of your application */}\n\t\t\t<App />\n\t\t</ThemeProvider>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}