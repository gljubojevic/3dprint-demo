(this["webpackJsonp3dprint-demo"]=this["webpackJsonp3dprint-demo"]||[]).push([[0],{107:function(e,t,n){},117:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(38),s=n.n(i),o=(n(107),n(168)),l=n(165),c=n(93),d=Object(c.a)({}),h=n(1),b=n(2),u=n(20),j=n(3),g=n(4),m=n(169),v=n(170),O=n(172),p=n(171),f=n(86),w=n.n(f),x=n(6),E=function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(x.jsx)(m.a,{position:"fixed",children:Object(x.jsxs)(v.a,{variant:"regular",children:[Object(x.jsx)(p.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:this.props.toggleDrawer,children:Object(x.jsx)(w.a,{})}),Object(x.jsx)(O.a,{variant:"h6",color:"inherit",children:"3D Print demo"})]})})}}]),n}(a.Component);E.defaultProps={toggleDrawer:null};var k=E,y=n(175),D=n(161),S=n(174),C=n(176),P=n(164),L=n(159),M=n(177),T=n(178),F=n(88),R=n.n(F),W=n(167),z=n(166),B=n(179),H=n(173),I=n(163),V=function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).toggleDrawer=a.toggleDrawer.bind(Object(u.a)(a)),a.toggleElement=a.toggleElement.bind(Object(u.a)(a)),a.save=a.save.bind(Object(u.a)(a)),a.state={isOpen:!1},a}return Object(b.a)(n,[{key:"toggleDrawer",value:function(e){("keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&this.setState({isOpen:!this.state.isOpen})}},{key:"save",value:function(){null!==this.props.save?(this.setState({isOpen:!1}),this.props.save()):console.error("No save handler set")}},{key:"toggleElement",value:function(e){this.props.toggleElement({name:e.target.name,visible:e.target.checked})}},{key:"renderSwitches",value:function(){var e=this;return this.props.availableElements.map((function(t,n){return Object(x.jsx)(H.a,{label:t.name,control:Object(x.jsx)(I.a,{checked:t.visible,onChange:e.toggleElement,name:t.name})},n)}))}},{key:"render",value:function(){return Object(x.jsx)(D.a,{anchor:"left",open:this.state.isOpen,onClose:this.toggleDrawer,children:Object(x.jsxs)(S.a,{p:1,children:[Object(x.jsx)(O.a,{variant:"h4",component:"h4",children:"Main menu"}),Object(x.jsx)(y.a,{}),Object(x.jsx)(C.a,{component:"nav","aria-label":"main selector",children:Object(x.jsx)(P.a,{children:Object(x.jsxs)(L.a,{onClick:this.save,children:[Object(x.jsx)(M.a,{children:Object(x.jsx)(R.a,{})}),Object(x.jsx)(T.a,{primary:"Save for print"})]})})}),Object(x.jsx)(y.a,{}),Object(x.jsxs)(z.a,{component:"fieldset",variant:"standard",children:[Object(x.jsx)(W.a,{component:"legend",children:"Elements on/off"}),Object(x.jsx)(B.a,{children:this.renderSwitches()})]})]})})}}]),n}(a.Component);V.defaultProps={save:null,availableElements:[],toggleElement:null};var A=V,q=n(5),J=n(89),K=n(90),N=n(91),G=function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).refRenderer=r.a.createRef(),a.save=a.save.bind(Object(u.a)(a)),a.animate=a.animate.bind(Object(u.a)(a)),a.loaderOk=a.loaderOk.bind(Object(u.a)(a)),a.loaderError=a.loaderError.bind(Object(u.a)(a)),a.loaderProgress=a.loaderProgress.bind(Object(u.a)(a)),a.toggleElement=a.toggleElement.bind(Object(u.a)(a)),a.exporterSTL=new N.a,a.scene=new q.bb,a.dirLight1=new q.i(16777215),a.dirLight1.position.set(1,1,1),a.scene.add(a.dirLight1),a.dirLight2=new q.i(16777215),a.dirLight2.position.set(-1,-1,-1),a.scene.add(a.dirLight2),a.ambientLight=new q.a(2236962),a.scene.add(a.ambientLight),a.loader=new J.a,a}return Object(b.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{ref:this.refRenderer})}},{key:"save",value:function(){console.log("Saving object");var e=this.scene.clone(),t=[];return e.traverse((function(e){e.visible||(console.log("To remove",e.name,e.id,e.uuid),t.push(e.id))})),t.forEach((function(t){var n=e.getObjectById(t);n.parent.remove(n)})),this.exporterSTL.parse(e,{binary:!0})}},{key:"componentDidMount",value:function(){this.camera=new q.S(75,window.innerWidth/window.innerHeight,.1,100),this.camera.position.y=.2,this.camera.position.z=.1,this.renderer=new q.qb,this.renderer.setSize(window.innerWidth,window.innerHeight),this.refRenderer.current.appendChild(this.renderer.domElement),this.controls=new K.a(this.camera,this.renderer.domElement),this.controls.listenToKeyEvents(window),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.screenSpacePanning=!1,this.controls.minDistance=.22,this.controls.maxDistance=2,this.controls.maxPolarAngle=Math.PI/2,this.controls.target=new q.ob(0,.15,0),this.controls.update(),this.animate(),null!==this.props.object3D&&this.loader.load(this.props.object3D,this.loaderOk,void 0,this.loaderError)}},{key:"animate",value:function(){requestAnimationFrame(this.animate),this.renderer.render(this.scene,this.camera)}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}},{key:"loaderOk",value:function(e){console.log("Object loaded");for(var t=[],n=0;n<e.scene.children.length;n++){var a=e.scene.children[n];a.name.includes("-main")||(a.visible=!1,t.push({name:a.name,visible:!1}))}this.loadedObject=e.scene,this.scene.add(this.loadedObject),null!==this.props.availableElements&&this.props.availableElements(t)}},{key:"loaderProgress",value:function(e){console.log(e.loaded/e.total*100+"% loaded")}},{key:"loaderError",value:function(e){console.error(e)}},{key:"toggleElement",value:function(e){console.log("Toggle visible",e);for(var t=this.loadedObject,n=0;n<t.children.length;n++)t.children[n].name===e.name&&(t.children[n].visible=e.visible)}}]),n}(a.Component);G.defaultProps={object3D:null,availableElements:null};var Q=G,U=n(92),X=function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={elements:[]},a.refDrawerMenu=r.a.createRef(),a.refView3D=r.a.createRef(),a.toggleDrawer=a.toggleDrawer.bind(Object(u.a)(a)),a.save=a.save.bind(Object(u.a)(a)),a.availableElements=a.availableElements.bind(Object(u.a)(a)),a.toggleElement=a.toggleElement.bind(Object(u.a)(a)),a}return Object(b.a)(n,[{key:"toggleDrawer",value:function(e){this.refDrawerMenu.current.toggleDrawer(e)}},{key:"save",value:function(){var e=this.refView3D.current.save(),t=new Blob([e],{type:"application/octet-stream"});Object(U.saveAs)(t,"for-print.stl")}},{key:"availableElements",value:function(e){console.log(e),this.setState({elements:e})}},{key:"toggleElement",value:function(e){var t=this.state.elements.map((function(t){return t.name===e.name&&(t.visible=e.visible),t}));this.setState({elements:t}),this.refView3D.current.toggleElement(e)}},{key:"render",value:function(){return Object(x.jsxs)(r.a.Fragment,{children:[Object(x.jsx)(k,{toggleDrawer:this.toggleDrawer}),Object(x.jsx)(A,{ref:this.refDrawerMenu,save:this.save,availableElements:this.state.elements,toggleElement:this.toggleElement}),Object(x.jsx)(Q,{ref:this.refView3D,object3D:"objects/solider-demo.glb",availableElements:this.availableElements})]})}}]),n}(a.Component),Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,181)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};s.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsxs)(l.a,{theme:d,children:[Object(x.jsx)(o.a,{enableColorScheme:!0}),Object(x.jsx)(X,{})]})}),document.getElementById("root")),Y()}},[[117,1,2]]]);
//# sourceMappingURL=main.cdf0b140.chunk.js.map