{"version":3,"sources":["theme.js","ui/AppTools.js","ui/DrawerMenu.js","ui/OptSelector.js","editor/View3D.js","App.js","reportWebVitals.js","index.js"],"names":["theme","createTheme","AppTools","AppBar","position","Toolbar","variant","IconButton","edge","color","onClick","this","props","toggleDrawer","Typography","Component","defaultProps","DrawerMenu","bind","save","state","isOpen","e","type","key","setState","fileFormat","currentTarget","dataset","value","console","error","Drawer","anchor","open","onClose","Box","p","component","Divider","List","ListItem","ListItemButton","ListItemIcon","ListItemText","primary","OptSelector","checkChange","radioChange","opts","map","o","idx","path","name","split","FormControlLabel","label","control","Checkbox","checked","visible","onChange","n","v","toggleElement","target","val","i","length","RadioGroup","renderRadios","Radio","allOpt","Paper","sx","m","opacity","FormControl","FormLabel","renderCheckboxes","renderRadioSelect","width","zIndex","top","mixins","toolbar","minHeight","renderSelectors","optElements","View3D","refRenderer","React","createRef","animate","loaderOk","loaderError","loaderProgress","onWindowResize","exporterSTL","STLExporter","exporterOBJ","OBJExporter","scene","THREE","background","showGroundPlane","gp","depthWrite","rotation","x","Math","PI","receiveShadow","add","hemiLight","set","dirLight1","dirLight2","dracoLoader","DRACOLoader","setDecoderPath","loadPath","loader","GLTFLoader","setDRACOLoader","ref","paddingTop","log","forSave","clone","remove","traverse","id","uuid","push","startsWith","forEach","getObjectById","parent","parse","binary","rsize","rendererDimensions","camera","height","y","z","renderer","antialias","setSize","current","appendChild","domElement","window","addEventListener","controls","OrbitControls","listenToKeyEvents","enableDamping","dampingFactor","screenSpacePanning","minDistance","maxDistance","maxPolarAngle","update","loadObject","object3D","removeEventListener","d","innerWidth","innerHeight","rst","getComputedStyle","parseFloat","paddingLeft","paddingRight","paddingBottom","aspect","updateProjectionMatrix","filePath","load","undefined","filesCube","setPath","requestAnimationFrame","render","glTF","loadedObject","elOpt","findOptional","children","grpOpt","groupOptional","defaultOptional","omat","flatShading","bb","object","isMesh","material","expandByObject","showBoundingBox","box","showSkeleton","skeleton","cameraToBBox","availableElements","xhr","loaded","total","obj","sort","a","b","grp","elCur","elPrev","prevNameParts","curNameParts","el","toggleElementRecursive","ob","fitOffset","size","center","getSize","getCenter","maxSize","max","fitHeightDistance","atan","fov","fitWidthDistance","distance","direction","sub","normalize","multiplyScalar","copy","near","far","backgroundCube","App","elements","refDrawerMenu","refView3D","data","blobSTL","Blob","saveAs","blobOBJ","elNamePath","newGroups","group","groupElNamePath","isRadio","Fragment","process","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","ThemeProvider","CssBaseline","enableColorScheme","document","getElementById"],"mappings":"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","file":"static/js/main.cc287c8e.chunk.js","sourcesContent":["//import { red } from '@mui/material/colors';\nimport { createTheme } from '@mui/material/styles';\n\n// A custom theme for this app\nconst theme = createTheme({\n//\tpalette: {\n//\t\tprimary: {\n//\t\t\tmain: '#556cd6',\n//\t\t},\n//\t\tsecondary: {\n//\t\t\tmain: '#19857b',\n//\t\t},\n//\t\terror: {\n//\t\t\tmain: red.A400,\n//\t\t},\n//\t},\n});\n\nexport default theme;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport AppBar from '@mui/material/AppBar';\nimport Toolbar from '@mui/material/Toolbar';\nimport Typography from '@mui/material/Typography';\nimport IconButton from '@mui/material/IconButton';\nimport MenuIcon from '@mui/icons-material/Menu';\n\nclass AppTools extends Component {\n\n\trender() {\n\t\treturn (\n\t\t\t<AppBar position=\"fixed\">\n\t\t\t\t<Toolbar variant=\"regular\">\n\t\t\t\t\t<IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\" onClick={this.props.toggleDrawer}>\n\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t<Typography variant=\"h6\" color=\"inherit\">3D Print demo</Typography>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t);\n\t}\n}\n\nAppTools.defaultProps = {\n\ttoggleDrawer: null\n}\n\nAppTools.propTypes = {\n\ttoggleDrawer: PropTypes.func\n}\n\nexport default AppTools;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Divider from '@mui/material/Divider';\nimport Drawer from '@mui/material/Drawer';\nimport Box from '@mui/material/Box';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemButton from '@mui/material/ListItemButton';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport ListItemText from '@mui/material/ListItemText';\nimport Typography from '@mui/material/Typography';\nimport Save from '@mui/icons-material/Save';\n\nclass DrawerMenu extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.toggleDrawer = this.toggleDrawer.bind(this);\n\t\tthis.save = this.save.bind(this);\n\t\tthis.state = {\n\t\t\tisOpen: false\n\t\t}\n\t}\n\n\ttoggleDrawer(e) {\n\t\tif (e.type === 'keydown' && (e.key === 'Tab' || e.key === 'Shift')) {\n\t\t\treturn;\n\t\t}\n\t\tthis.setState({ isOpen: !this.state.isOpen });\n\t}\n\n\tsave(e) {\n\t\tif (null === this.props.save) {\n\t\t\tconsole.error(\"No save handler set\");\n\t\t\treturn;\n\t\t}\n\t\t// read from \"data-value\" attribute\n\t\tlet fileFormat = e.currentTarget.dataset.value;\n\t\tif (!fileFormat) {\n\t\t\tfileFormat = \"STL\" // default to STL format\n\t\t}\n\t\tthis.setState({ isOpen:false });\n\t\tthis.props.save(fileFormat);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Drawer anchor=\"left\" open={this.state.isOpen} onClose={this.toggleDrawer}>\n\t\t\t\t<Box p={1}>\n\t\t\t\t\t<Typography variant=\"h4\" component=\"h4\">Main menu</Typography>\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<List component=\"nav\" aria-label=\"main selector\">\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemButton onClick={this.save} data-value=\"STL\">\n\t\t\t\t\t\t\t\t<ListItemIcon><Save /></ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Save STL for print\" />\n\t\t\t\t\t\t\t</ListItemButton>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemButton onClick={this.save} data-value=\"OBJ\">\n\t\t\t\t\t\t\t\t<ListItemIcon><Save /></ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Save OBJ for print\" />\n\t\t\t\t\t\t\t</ListItemButton>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t</List>\n\t\t\t\t</Box>\n\t\t\t</Drawer>\n\t\t);\n\t}\n}\n\nDrawerMenu.defaultProps = {\n\tsave: null\n}\n\nDrawerMenu.propTypes = {\n\tsave: PropTypes.func\n}\n\nexport default DrawerMenu;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from '@mui/material/Box';\nimport Paper from '@mui/material/Paper';\nimport FormLabel from '@mui/material/FormLabel';\nimport FormControl from '@mui/material/FormControl';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport Checkbox from '@mui/material/Checkbox';\nimport Radio from '@mui/material/Radio';\nimport RadioGroup from '@mui/material/RadioGroup';\n\nclass OptSelector extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.checkChange = this.checkChange.bind(this);\n\t\tthis.radioChange = this.radioChange.bind(this);\n\t}\n\n\trenderCheckboxes(opts) {\n\t\treturn opts.map((o, idx) => {\n\t\t\tlet path = o.name.split('_');\n\t\t\tlet name = path[1] + ' ' + path[2];\n\t\t\treturn (\n\t\t\t\t<FormControlLabel key={idx} label={name} value={o.name} control={<Checkbox checked={o.visible} onChange={this.checkChange}  />} />\n\t\t\t);\n\t\t});\n\t}\n\n\tcheckChange(e) {\n\t\tconst n = e.currentTarget.value;\n\t\tconst v = e.currentTarget.checked;\n\t\t//console.log(n, \"check change ->\", v);\n\t\tif (null !==  this.props.toggleElement) {\n\t\t\tthis.props.toggleElement({name:n, visible:v});\n\t\t}\n\t}\n\n\tradioChange(e) {\n\t\t//console.log(\"radio change ->\", e.target.value);\n\t\tif (null !==  this.props.toggleElement) {\n\t\t\tthis.props.toggleElement({name:e.target.value, visible:true});\n\t\t}\n\t}\n\n\trenderRadioSelect(opts) {\n\t\tlet val = '';\n\t\tfor (let i = 0; i < opts.length; i++) {\n\t\t\tif (opts[i].visible) {\n\t\t\t\tval = opts[i].name;\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<RadioGroup\n\t\t\t\taria-labelledby=\"demo-controlled-radio-buttons-group\"\n\t\t\t\tname=\"controlled-radio-buttons-group\"\n\t\t\t\tvalue={val}\n\t\t\t\tonChange={this.radioChange}>\n\t\t\t\t{this.renderRadios(opts)}\n\t\t\t</RadioGroup>\n\t\t);\n\t}\n\n\trenderRadios(opts) {\n\t\treturn opts.map((o, idx) => {\n\t\t\tlet path = o.name.split('_');\n\t\t\tlet name = path[1] + ' ' + path[2];\n\t\t\treturn (\n\t\t\t\t<FormControlLabel key={idx} label={name} value={o.name} control={<Radio />} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderSelectors(allOpt) {\n\t\treturn allOpt.map((opts, idx) => {\n\t\t\tconst key = \"opt_\" + idx;\n\t\t\tconst label = opts[0].name.split('_')[1];\n\t\t\treturn (\n\t\t\t\t<Paper sx={{p: 1, m: 1, opacity: 0.8 }} key={key}>\n\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t<FormLabel component=\"legend\">{label}</FormLabel>\n\t\t\t\t\t\t{(1 === opts.length) ? this.renderCheckboxes(opts) : this.renderRadioSelect(opts)}\n\t\t\t\t\t</FormControl>\n\t\t\t\t</Paper>\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Box sx={{ \n\t\t\t\twidth: 1/5,\n\t\t\t\tm: 2,\n\t\t\t\tzIndex: 'appBar', \n\t\t\t\tposition: 'absolute', \n\t\t\t\ttop: (theme) => theme.mixins.toolbar.minHeight + 'px'\n\t\t\t}}>\n\t\t\t\t{this.renderSelectors(this.props.optElements)}\n\t\t\t</Box>\n\t\t);\n\t}\n}\n\nOptSelector.defaultProps = {\n\toptElements: [],\n\ttoggleElement: null\n}\n\nOptSelector.propTypes = {\n\toptElements: PropTypes.array,\n\ttoggleElement: PropTypes.func\n}\n\nexport default OptSelector;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport * as THREE from \"three\";\nimport Box from '@mui/material/Box';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader.js';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport { STLExporter } from 'three/examples/jsm/exporters/STLExporter.js';\nimport { OBJExporter } from 'three/examples/jsm/exporters/OBJExporter.js';\n\nclass View3D extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.refRenderer = React.createRef();\n\t\t// methods\n\t\tthis.save = this.save.bind(this);\n\t\tthis.animate = this.animate.bind(this);\n\t\tthis.loaderOk = this.loaderOk.bind(this);\n\t\tthis.loaderError = this.loaderError.bind(this);\n\t\tthis.loaderProgress = this.loaderProgress.bind(this);\n\t\tthis.toggleElement = this.toggleElement.bind(this);\n\t\tthis.onWindowResize = this.onWindowResize.bind(this);\n\n\t\t// Init exporters\n\t\tthis.exporterSTL = new STLExporter();\n\t\tthis.exporterOBJ = new OBJExporter();\n\n\t\t// Init default scene\n\t\tthis.scene = new THREE.Scene();\n\t\tthis.scene.background = new THREE.Color( 0xafafaf );\n\t\t//this.scene.fog = new THREE.Fog( 0xa0a0a0, 10, 50 );\n\n\t\t// ground plane\n\t\tif (this.props.showGroundPlane) {\n\t\t\tconst gp = new THREE.Mesh(\n\t\t\t\tnew THREE.PlaneGeometry(2, 2),\n\t\t\t\tnew THREE.MeshPhongMaterial( { color: 0x888888, depthWrite: false } ) \n\t\t\t);\n\t\t\tgp.rotation.x = - Math.PI / 2;\n\t\t\tgp.receiveShadow = true;\n\t\t\tgp.name = \"hlp_ground_plane\";\n\t\t\tthis.scene.add(gp);\n\t\t}\n\n\t\t// Ligts from example\n\t\tconst hemiLight = new THREE.HemisphereLight( 0xffffff, 0x444444 );\n\t\themiLight.position.set( 0, 20, 0 );\n\t\tthis.scene.add( hemiLight );\n\n\t\t//const dirLight = new THREE.DirectionalLight( 0xffffff );\n\t\t//dirLight.position.set( - 3, 10, - 10 );\n\t\t//dirLight.castShadow = true;\n\t\t//dirLight.shadow.camera.top = 2;\n\t\t//dirLight.shadow.camera.bottom = - 2;\n\t\t//dirLight.shadow.camera.left = - 2;\n\t\t//dirLight.shadow.camera.right = 2;\n\t\t//dirLight.shadow.camera.near = 0.1;\n\t\t//dirLight.shadow.camera.far = 40;\n\t\t//this.scene.add( dirLight );\n\t\t\n\t\tthis.dirLight1 = new THREE.DirectionalLight( 0xffffff );\n\t\tthis.dirLight1.position.set( 2, 2, 2 );\n\t\tthis.scene.add( this.dirLight1 );\n\n\t\tthis.dirLight2 = new THREE.DirectionalLight( 0xffffff );\n\t\tthis.dirLight2.position.set( -2, -2, -2 );\n\t\tthis.scene.add( this.dirLight2 );\n\n\t\t//this.ambientLight = new THREE.AmbientLight( 0x222222 );\n\t\t//this.scene.add( this.ambientLight );\n\n\t\t// glTF decompressor, with path for decompression lib loading\n\t\tconst dracoLoader = new DRACOLoader()\n\t\tdracoLoader.setDecoderPath(props.loadPath + '/libs/draco/')\n\t\t//dracoLoader.setDecoderConfig({type: 'js'});\t// (Optional) Override detection of WASM support.\n\t\t// init object loader with decompressor\n\t\tthis.loader = new GLTFLoader();\n\t\tthis.loader.setDRACOLoader(dracoLoader)\n\t}\n\n\t// just empty div to add renderer\n\trender() {\n\t\t// this is to make container below toolbar\n\t\t// theme access is possible through function generating sx\n\t\treturn (\n\t\t\t<Box\n\t\t\t\tref={this.refRenderer} \n\t\t\t\tsx={{\n\t\t\t\t\tpaddingTop: (theme) => theme.mixins.toolbar.minHeight + 'px'\n\t\t\t\t}} \n\t\t\t/>\n\t\t);\n\t}\n\n\t// extract scene and save object\n\tsave(fileFormat) {\n\t\tconsole.log(\"Saving object\");\n\t\t// clone scene to remove hidden\n\t\tlet forSave = this.scene.clone();\n\t\t// find invisible to remove\n\t\tlet remove = [];\n\t\tforSave.traverse(function(o){\n\t\t\tif (!o.visible) {\n\t\t\t\tconsole.log(\"To remove\", o.name, o.id, o.uuid);\n\t\t\t\tremove.push(o.id);\n\t\t\t}\n\t\t\tif (o.name.startsWith('hlp_')) {\n\t\t\t\tremove.push(o.id);\n\t\t\t}\n\t\t});\n\t\t// finally remove invisible\n\t\tremove.forEach(id => {\n\t\t\tlet o = forSave.getObjectById(id);\n\t\t\to.parent.remove(o);\n\t\t});\n\t\t// return cleaned\n\t\tswitch (fileFormat) {\n\t\t\tcase \"STL\":\n\t\t\t\treturn this.exporterSTL.parse(forSave, {binary:true});\n\t\t\tcase \"OBJ\":\n\t\t\t\treturn this.exporterOBJ.parse(forSave)\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn this.exporterSTL.parse(forSave, {binary:true});\n\t}\n\n\t// init three.js renderer\n\tcomponentDidMount() {\n\t\t// renderer element\n\t\tconst rsize = this.rendererDimensions();\n\n\t\t// setup camera\n\t\tthis.camera = new THREE.PerspectiveCamera( 75, rsize.width / rsize.height, 0.1, 100 );\n\t\tthis.camera.position.y = 0.20;\n\t\tthis.camera.position.z = 0.10;\n\n\t\tthis.renderer = new THREE.WebGLRenderer({ antialias: true });\n\t\t//this.renderer.setPixelRatio( window.devicePixelRatio );\t// doubles pixels?!?\n\t\tthis.renderer.setSize(rsize.width, rsize.height);\n\t\t//this.renderer.shadowMap.enabled = true;\n\t\t// use ref as a mount point of the Three.js scene instead of the document.body\n\t\tthis.refRenderer.current.appendChild( this.renderer.domElement );\n\t\t// Add handler for resizing\n\t\twindow.addEventListener( 'resize', this.onWindowResize );\n\n\t\t// controls\n\t\tthis.controls = new OrbitControls( this.camera, this.renderer.domElement );\n\t\tthis.controls.listenToKeyEvents( window ); // optional\n\t\tthis.controls.enableDamping = true; // an animation loop is required when either damping or auto-rotation are enabled\n\t\tthis.controls.dampingFactor = 0.05;\n\t\tthis.controls.screenSpacePanning = false;\n\t\tthis.controls.minDistance = 0.22;\n\t\tthis.controls.maxDistance = 2;\n\t\tthis.controls.maxPolarAngle = Math.PI / 2;\n\t\tthis.controls.target = new THREE.Vector3(0, 0.15, 0);\n\t\tthis.controls.update();\n\n\t\t// start animation\n\t\tthis.animate();\n\n\t\t// can we load\n\t\tif (null === this.props.loadPath) {\n\t\t\treturn;\n\t\t}\n\t\t// kickstart loading\n\t\t//this.scene.background = this.loadBackgroundCube(this.props.backgroundCube);\n\t\t//const reflectionCube = this.loadBackgroundCube(this.props.backgroundCube);\n\n\t\t//this.cubeMaterial1 = new THREE.MeshLambertMaterial( { color: 0xffffff, envMap: reflectionCube } );\n\t\tthis.loadObject(this.props.object3D);\n\t}\n\n\tcomponentWillUnmount() {\n\t\t// remove handler for resizing\n\t\twindow.removeEventListener( 'resize', this.onWindowResize );\n\t}\n\n\trendererDimensions(){\n\t\tlet d = {\n\t\t\t//width: this.refRenderer.current.clientWidth,\n\t\t\twidth: window.innerWidth,\n\t\t\t//height: this.refRenderer.current.clientHeight\n\t\t\theight: window.innerHeight\n\t\t}\n\t\tlet rst = getComputedStyle(this.refRenderer.current);\n\t\td.width -= parseFloat(rst.paddingLeft) + parseFloat(rst.paddingRight);\n\t\td.height -= parseFloat(rst.paddingTop) + parseFloat(rst.paddingBottom);\n\t\t//console.log(d);\n\t\treturn d;\n\t}\n\n\t// TODO: fix resizing \n\tonWindowResize() {\n\t\tconst rsize = this.rendererDimensions();\n\t\tthis.camera.aspect = rsize.width / rsize.height;\n\t\tthis.camera.updateProjectionMatrix();\n\t\tthis.renderer.setSize( rsize.width, rsize.height );\n\t}\n\n\n\tloadObject(filePath){\n\t\tif (null === filePath) {\n\t\t\treturn;\n\t\t}\n\t\tthis.loader.load(\n\t\t\tthis.props.loadPath + filePath,\n\t\t\tthis.loaderOk,\n\t\t\tundefined, //this.loaderProgress,\n\t\t\tthis.loaderError\n\t\t);\n\t}\n\n\tloadBackgroundCube(filesCube) {\n\t\tif (null === filesCube) {\n\t\t\treturn;\n\t\t}\n\t\treturn new THREE.CubeTextureLoader()\n\t\t\t.setPath(this.props.loadPath)\n\t\t\t.load(filesCube);\n\t}\n\n\tanimate() {\n\t\trequestAnimationFrame( this.animate );\n\t\tthis.renderer.render( this.scene, this.camera );\n\t};\n\n\t// called when object is loaded\n\tloaderOk(glTF) {\n\t\tconsole.log(\"Object loaded\");\n\t\t//console.log(glTF);\n\t\tthis.loadedObject = glTF.scene;\n\n\t\t// find optional elements\n\t\tlet elOpt=[];\n\t\tthis.findOptional(elOpt, this.loadedObject.children);\n\t\tlet grpOpt = this.groupOptional(elOpt);\n\t\t// preselect optional elements\n\t\tthis.defaultOptional(grpOpt);\n\n\t\tconst omat = new THREE.MeshPhongMaterial( { color: 0x226622, flatShading: true } )\n\t\t// enable shadow and set material, must have directional light, calc bounding box\n\t\tlet bb = new THREE.Box3();\n\t\tthis.loadedObject.traverse( function(object) {\n\t\t\tif ( !object.isMesh ) { return; }\n\t\t\t//object.castShadow = true;\n\t\t\tobject.material = omat;\n\t\t\t// calc bounding box\n\t\t\tbb.expandByObject(object);\n\t\t});\n\n\t\t// display bounding box\n\t\tif (this.props.showBoundingBox) {\n\t\t\tconst box = new THREE.Box3Helper(bb, 0xff0000)\n\t\t\tbox.name = \"hlp_bounding_box\";\n\t\t\tthis.scene.add( box );\n\t\t}\n\n\t\t// visible skeleton\n\t\tif (this.props.showSkeleton) {\n\t\t\tconst skeleton = new THREE.SkeletonHelper(this.loadedObject);\n\t\t\tskeleton.name = 'hlp_skeleton';\n\t\t\tskeleton.visible = true;\n\t\t\tthis.scene.add( skeleton );\n\t\t}\n\n\t\t// adjust camera to object loaded\n\t\tthis.cameraToBBox(bb, this.camera, this.controls, 1.0);\n\n\t\t// set scene for display\n\t\tthis.scene.add(this.loadedObject);\n\t\t\n\t\t// Call changed list of models\n\t\tif (null !== this.props.availableElements) {\n\t\t\tthis.props.availableElements(grpOpt);\n\t\t}\n\t}\n\n\t// called while loading is progressing\n\tloaderProgress (xhr) {\n\t\tconsole.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );\n\t}\n\n\t// called when object load fails\n\tloaderError(error) {\n\t\tconsole.error(error);\n\t}\n\n\t// finds optional objects, and hide them, this is recursive process, \n\t// only hides objects starting with name prefix \"opt_\"\n\tfindOptional(elOpt, children) {\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tlet obj = children[i];\n\t\t\t//console.log(obj.name, \"children ->\", obj.children.length);\n\t\t\t// do recursive\n\t\t\tif (obj.children.length > 0) {\n\t\t\t\tthis.findOptional(elOpt, obj.children);\n\t\t\t}\n\t\t\t// skip non optional objects\n\t\t\tif (!obj.name.startsWith(\"opt_\")) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t// hide optional objects\n\t\t\tobj.visible = false;\n\t\t\t// add to list for hide/show\n\t\t\telOpt.push({\n\t\t\t\tname: obj.name,\n\t\t\t\tvisible: false\n\t\t\t});\n\t\t}\n\t}\n\n\t// Groups all optional elements for selection UI\n\tgroupOptional(elOpt) {\n\t\tlet grpOpt = [];\n\t\tif (0 === elOpt.length) {\n\t\t\treturn grpOpt;\n\t\t}\n\t\t// sort before grouping\n\t\telOpt.sort((a,b) => {\n\t\t\tif (a.name < b.name) { return -1; }\n\t\t\tif (a.name > b.name) { return 1; }\n\t\t\treturn 0;\n\t\t});\n\n\t\tlet grp = [];\n\t\tlet elCur = elOpt[0];\n\t\tlet elPrev = elCur;\n\t\tgrp.push(elCur);\n\n\t\tfor (let i = 1; i < elOpt.length; i++) {\n\t\t\telCur = elOpt[i];\n\n\t\t\t// split names to get category info\n\t\t\t// 2nd is category if matches it is same category\n\t\t\tlet prevNameParts = elPrev.name.split('_');\n\t\t\tlet curNameParts = elCur.name.split('_');\n\n\t\t\t// check for different category\n\t\t\tif (prevNameParts[1] !== curNameParts[1]) {\n\t\t\t\tgrpOpt.push(grp);\n\t\t\t\tgrp = [];\n\t\t\t}\n\n\t\t\tgrp.push(elCur);\n\t\t\telPrev = elCur;\n\t\t}\n\n\t\tgrpOpt.push(grp);\n\t\treturn grpOpt;\n\t}\n\n\t// makes default selection\n\tdefaultOptional(grpOpt) {\n\t\tfor (let i = 0; i < grpOpt.length; i++) {\n\t\t\t// skip preselect when only one optional element in group\n\t\t\tif (1 === grpOpt[i].length) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t// preselect first in group\n\t\t\tgrpOpt[i][0].visible = true;\n\t\t\tthis.toggleElement(grpOpt[i][0]);\n\t\t}\n\t}\n\n\t// toggle visible element, check for traversing scene..\n\t// https://github.com/mrdoob/three.js/blob/dev/examples/jsm/exporters/STLExporter.js\n\ttoggleElement(el) {\n\t\tconsole.log(\"Toggle visible\", el);\n\t\tthis.toggleElementRecursive(el, this.loadedObject);\n\t}\n\n\ttoggleElementRecursive(el, ob) {\n\t\tif (ob.name === el.name) {\n\t\t\tob.visible = el.visible;\n\t\t\treturn;\n\t\t}\n\t\tfor (let i = 0; i < ob.children.length; i++) {\n\t\t\tif (ob.children[i].name === el.name) {\n\t\t\t\tob.children[i].visible = el.visible;\n\t\t\t}\n\t\t\tif (0 < ob.children[i].children.length) {\n\t\t\t\tthis.toggleElementRecursive(el, ob.children[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\t// point camera and controls to bounding box\n\tcameraToBBox(box, camera, controls, fitOffset = 1.2) {\n\t\tconst size = new THREE.Vector3();\n\t\tconst center = new THREE.Vector3();\n\t\tbox.getSize(size);\n\t\tbox.getCenter(center );\n\n\t\tconst maxSize = Math.max(size.x, size.y, size.z);\n\t\tconst fitHeightDistance = maxSize / (2 * Math.atan(Math.PI * camera.fov / 360));\n\t\tconst fitWidthDistance = fitHeightDistance / camera.aspect;\n\t\tconst distance = fitOffset * Math.max(fitHeightDistance, fitWidthDistance);\n\n\t\tconst direction = controls.target.clone()\n\t\t\t.sub(camera.position)\n\t\t\t.normalize()\n\t\t\t.multiplyScalar(distance);\n\n\t\tcontrols.maxDistance = distance * 10;\n\t\tcontrols.target.copy(center);\n\n\t\tcamera.near = distance / 100;\n\t\tcamera.far = distance * 100;\n\t\tcamera.updateProjectionMatrix();\n\n\t\tcamera.position.copy(controls.target).sub(direction);\n\n\t\tcontrols.update();\n\t}\n}\n\nView3D.defaultProps = {\n\tloadPath: null,\n\tobject3D: null,\n\tshowBoundingBox: false,\n\tshowSkeleton: false,\n\tshowGroundPlane: true,\n\tbackgroundCube: null,\n\tavailableElements: null\n}\n\nView3D.propTypes = {\n\tloadPath: PropTypes.string,\n\tobject3D: PropTypes.string,\n\tshowBoundingBox: PropTypes.bool,\n\tshowSkeleton: PropTypes.bool,\n\tshowGroundPlane: PropTypes.bool,\n\tbackgroundCube: PropTypes.array,\n\tavailableElements: PropTypes.func\n}\n\nexport default View3D;","import React, { Component } from 'react';\nimport AppTools from './ui/AppTools';\nimport DrawerMenu from './ui/DrawerMenu';\nimport OptSelector from './ui/OptSelector';\nimport View3D from './editor/View3D';\nimport { saveAs } from 'file-saver';\n\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\telements: [],\n\t\t}\n\t\tthis.refDrawerMenu = React.createRef();\n\t\tthis.refView3D = React.createRef();\n\t\tthis.toggleDrawer = this.toggleDrawer.bind(this);\n\t\tthis.save = this.save.bind(this);\n\t\tthis.availableElements = this.availableElements.bind(this);\n\t\tthis.toggleElement = this.toggleElement.bind(this);\n\t}\n\n\ttoggleDrawer(e) {\n\t\tthis.refDrawerMenu.current.toggleDrawer(e);\n\t}\n\n\tsave(fileFormat) {\n\t\t// get data from scene\n\t\tlet data = this.refView3D.current.save(fileFormat);\n\t\t//console.log(\"Data for save ->\", data);\n\t\tswitch (fileFormat) {\n\t\t\tcase \"STL\":\n\t\t\t\tlet blobSTL = new Blob( [data], { type : 'application/octet-stream' } ); \n\t\t\t\tsaveAs(blobSTL, \"for-print.stl\");\n\t\t\t\tbreak;\n\t\t\tcase \"OBJ\":\n\t\t\t\tlet blobOBJ = new Blob( [ data ], { type: 'text/plain' } );\n\t\t\t\tsaveAs(blobOBJ, \"for-print.obj\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log(\"Unsupported file format ->\",fileFormat);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Get list of elements to hide and show\n\tavailableElements(elements) {\n\t\tthis.setState({elements:elements});\n\t}\n\n\ttoggleElement(el) {\n\t\tconst elNamePath = el.name.split('_');\n\t\tlet newGroups = this.state.elements.map((group)=> {\n\t\t\t// check if same group on first element\n\t\t\tconst groupElNamePath = group[0].name.split('_');\n\t\t\t// Not same group skip check\n\t\t\tif (elNamePath[1] !== groupElNamePath[1]) {\n\t\t\t\treturn group\n\t\t\t}\n\n\t\t\tconst isRadio = group.length > 1;\n\t\t\treturn group.map((e) => {\n\t\t\t\t// change state of element\n\t\t\t\tif (e.name === el.name) {\n\t\t\t\t\te.visible = el.visible;\n\t\t\t\t\tthis.refView3D.current.toggleElement(e);\n\t\t\t\t} else {\n\t\t\t\t\t// when is radio selection toggle invert previous selection\n\t\t\t\t\tif (isRadio) {\n\t\t\t\t\t\te.visible = !el.visible;\n\t\t\t\t\t\tthis.refView3D.current.toggleElement(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn e;\n\t\t\t});\n\t\t});\n\t\tthis.setState({elements:newGroups});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<AppTools toggleDrawer={this.toggleDrawer} />\n\t\t\t\t<DrawerMenu ref={this.refDrawerMenu} save={this.save} />\n\t\t\t\t<View3D ref={this.refView3D} loadPath={process.env.PUBLIC_URL} \n\t\t\t\t\tobject3D=\"/objects/rhodesia-solider.glb\"\n\t\t\t\t\tbackgroundCube={[\n\t\t\t\t\t\t'/textures/Brudslojan/posx.jpg',\n\t\t\t\t\t\t'/textures/Brudslojan/negx.jpg',\n\t\t\t\t\t\t'/textures/Brudslojan/posy.jpg',\n\t\t\t\t\t\t'/textures/Brudslojan/negy.jpg',\n\t\t\t\t\t\t'/textures/Brudslojan/posz.jpg',\n\t\t\t\t\t\t'/textures/Brudslojan/negz.jpg'\n\t\t\t\t\t]}\n\t\t\t\t\tavailableElements={this.availableElements} />\n\t\t\t\t<OptSelector optElements={this.state.elements} toggleElement={this.toggleElement} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n\tif (onPerfEntry && onPerfEntry instanceof Function) {\n\t\timport('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n\t\t\tgetCLS(onPerfEntry);\n\t\t\tgetFID(onPerfEntry);\n\t\t\tgetFCP(onPerfEntry);\n\t\t\tgetLCP(onPerfEntry);\n\t\t\tgetTTFB(onPerfEntry);\n\t\t});\n\t}\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport { ThemeProvider } from '@mui/material/styles';\nimport theme from './theme';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<ThemeProvider theme={theme}>\n\t\t\t<CssBaseline enableColorScheme />\n\t\t\t{/* The rest of your application */}\n\t\t\t<App />\n\t\t</ThemeProvider>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}