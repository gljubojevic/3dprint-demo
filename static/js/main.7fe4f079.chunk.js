(this["webpackJsonp3dprint-demo"]=this["webpackJsonp3dprint-demo"]||[]).push([[0],{129:function(e,t,n){},139:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(42),s=n.n(r),o=(n(129),n(190)),l=n(186),c=n(111),d=Object(c.a)({}),h=n(2),u=n(3),m=n(17),b=n(6),p=n(7),g=n(193),v=n(194),f=n(192),j=n(195),O=n(100),y=n.n(O),x=n(1),k=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(x.jsx)(g.a,{position:"fixed",children:Object(x.jsxs)(v.a,{variant:"regular",children:[Object(x.jsx)(j.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:this.props.toggleDrawer,children:Object(x.jsx)(y.a,{})}),Object(x.jsx)(f.a,{variant:"h6",color:"inherit",children:"3D Print demo"})]})})}}]),n}(a.Component);k.defaultProps={toggleDrawer:null};var w=k,C=n(197),D=n(180),S=n(196),E=n(198),T=n(185),A=n(178),P=n(199),M=n(200),L=n(90),B=n.n(L),_=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).toggleDrawer=a.toggleDrawer.bind(Object(m.a)(a)),a.save=a.save.bind(Object(m.a)(a)),a.state={isOpen:!1},a}return Object(u.a)(n,[{key:"toggleDrawer",value:function(e){("keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&this.setState({isOpen:!this.state.isOpen})}},{key:"save",value:function(e){if(null!==this.props.save){var t=e.currentTarget.dataset.value;t||(t="STL"),this.setState({isOpen:!1}),this.props.save(t)}else console.error("No save handler set")}},{key:"render",value:function(){return Object(x.jsx)(D.a,{anchor:"left",open:this.state.isOpen,onClose:this.toggleDrawer,children:Object(x.jsxs)(S.a,{p:1,children:[Object(x.jsx)(f.a,{variant:"h4",component:"h4",children:"Main menu"}),Object(x.jsx)(C.a,{}),Object(x.jsxs)(E.a,{component:"nav","aria-label":"main selector",children:[Object(x.jsx)(T.a,{children:Object(x.jsxs)(A.a,{onClick:this.save,"data-value":"STL",children:[Object(x.jsx)(P.a,{children:Object(x.jsx)(B.a,{})}),Object(x.jsx)(M.a,{primary:"Save STL for print"})]})}),Object(x.jsx)(T.a,{children:Object(x.jsxs)(A.a,{onClick:this.save,"data-value":"OBJ",children:[Object(x.jsx)(P.a,{children:Object(x.jsx)(B.a,{})}),Object(x.jsx)(M.a,{primary:"Save OBJ for print"})]})})]})]})})}}]),n}(a.Component);_.defaultProps={save:null};var R=_,F=n(202),W=n(103),z=n.n(W),G=n(102),I=n.n(G),V=n(105),H=n.n(V),N=n(104),J=n.n(N),U=n(191),Q=n(188),q=n(187),K=n(201),X=n(181),Y=n(189),Z=n(183),$=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).animFrameLabel=a.animFrameLabel.bind(Object(m.a)(a)),a.radioChange=a.radioChange.bind(Object(m.a)(a)),a.sliderChange=a.sliderChange.bind(Object(m.a)(a)),a}return Object(u.a)(n,[{key:"sliderChange",value:function(e){var t=e.target.value,n=this.findSelected(this.props.animPoses);null!==this.props.setAnimTime&&this.props.setAnimTime(t*n.frameTime)}},{key:"findSelected",value:function(e){for(var t=0;t<e.length;t++)if(e[t].enabled)return e[t];return null}},{key:"animFrameLabel",value:function(e){return"".concat(e," frame")}},{key:"renderAnimFrames",value:function(e){var t=this.findSelected(e);if(null===t||0===t.frames)return null;var n="SELECT FRAME (".concat(t.frames," frm / ").concat(Math.round(1/t.frameTime,2),"fps)");return Object(x.jsx)(U.a,{sx:{p:1,m:1,opacity:.8},children:Object(x.jsxs)(q.a,{sx:{width:"100%"},children:[Object(x.jsx)(Q.a,{component:"legend",children:n}),Object(x.jsx)(S.a,{sx:{p:1},children:Object(x.jsx)(Z.a,{"aria-label":"Fames",defaultValue:0,getAriaValueText:this.animFrameLabel,valueLabelDisplay:"auto",marks:!0,min:0,max:t.frames-1,step:1,onChange:this.sliderChange})})]})})}},{key:"radioChange",value:function(e){null!==this.props.toggleAnim&&this.props.toggleAnim(e.target.value)}},{key:"renderRadioSelect",value:function(e){for(var t="",n=0;n<e.length;n++)e[n].enabled&&(t=e[n].name);return Object(x.jsx)(Y.a,{"aria-labelledby":"demo-controlled-radio-buttons-group",name:"controlled-radio-buttons-group",value:t,onChange:this.radioChange,children:this.renderRadios(e)})}},{key:"renderRadios",value:function(e){return e.map((function(e,t){return Object(x.jsx)(K.a,{label:e.name,value:e.name,control:Object(x.jsx)(X.a,{})},t)}))}},{key:"render",value:function(){var e=this.props.animPoses;return Object(x.jsxs)(i.a.Fragment,{children:[Object(x.jsx)(U.a,{sx:{p:1,m:1,opacity:.8},children:Object(x.jsxs)(q.a,{children:[Object(x.jsx)(Q.a,{component:"legend",children:"SELECT POSE"}),this.renderRadioSelect(e)]})}),this.renderAnimFrames(e)]})}}]),n}(a.Component);$.defaultProps={animPoses:[],toggleAnim:null,setAnimTime:null};var ee=$,te=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).menuSelected=a.menuSelected.bind(Object(m.a)(a)),a.elementCategorySelected=a.elementCategorySelected.bind(Object(m.a)(a)),a.state={selectedOption:""},a}return Object(u.a)(n,[{key:"menuSelected",value:function(e){var t=e.currentTarget.dataset.value;this.setState({selectedOption:t}),this.props.selectElementCategory("")}},{key:"elementCategorySelected",value:function(e){var t=e.currentTarget.dataset.value;this.props.selectElementCategory(t)}},{key:"renderCategoryOptions",value:function(){var e=this,t=this.props.elementCategory;return this.props.elementGroups.map((function(n,a){var i=n[0];return Object(x.jsx)(T.a,{disablePadding:!0,selected:i===t,children:Object(x.jsxs)(A.a,{onClick:e.elementCategorySelected,"data-value":i,children:[Object(x.jsx)(M.a,{primary:i.toUpperCase()}),Object(x.jsx)(I.a,{})]})},a)}))}},{key:"renderCategorySelector",value:function(){return"configure"!==this.state.selectedOption?null:Object(x.jsx)(U.a,{sx:{p:0,m:1,opacity:.8},children:Object(x.jsxs)(E.a,{sx:{width:"100%"},children:[Object(x.jsx)(F.a,{component:"div",children:"MODEL OPTIONS"}),this.renderCategoryOptions()]})})}},{key:"renderAnimSelector",value:function(){return"pose"!==this.state.selectedOption?null:Object(x.jsx)(ee,{animPoses:this.props.optAnimations,toggleAnim:this.props.toggleAnimation,setAnimTime:this.props.setAnimationTime})}},{key:"renderDone",value:function(e){return e?Object(x.jsx)(T.a,{disablePadding:!0,children:Object(x.jsxs)(A.a,{onClick:this.menuSelected,"data-value":"",children:[Object(x.jsx)(P.a,{children:Object(x.jsx)(z.a,{})}),Object(x.jsx)(M.a,{primary:"DONE"})]})}):null}},{key:"renderOptions",value:function(e){return e?Object(x.jsxs)(i.a.Fragment,{children:[Object(x.jsx)(T.a,{disablePadding:!0,children:Object(x.jsxs)(A.a,{onClick:this.menuSelected,"data-value":"configure",children:[Object(x.jsx)(P.a,{children:Object(x.jsx)(J.a,{})}),Object(x.jsx)(M.a,{primary:"CONFIGURE MODEL"})]})}),this.props.optAnimations.length>0&&Object(x.jsx)(T.a,{disablePadding:!0,children:Object(x.jsxs)(A.a,{onClick:this.menuSelected,"data-value":"pose",children:[Object(x.jsx)(P.a,{children:Object(x.jsx)(H.a,{})}),Object(x.jsx)(M.a,{primary:"SELECT POSE"})]})})]}):null}},{key:"render",value:function(){var e=""!==this.state.selectedOption;return Object(x.jsxs)(S.a,{sx:{width:.2,m:2,zIndex:"appBar",position:"absolute",top:function(e){return e.mixins.toolbar.minHeight+"px"}},children:[Object(x.jsxs)(E.a,{sx:{bgcolor:"background.paper",opacity:.8,borderRadius:1},children:[this.renderDone(e),this.renderOptions(!e)]}),this.renderCategorySelector(),this.renderAnimSelector()]})}}]),n}(a.Component);te.defaultProps={elementGroups:[],toggleElement:null,optAnimations:[],toggleAnimation:null,setAnimationTime:null,elementCategory:"",selectElementCategory:null};var ne=te,ae=n(182),ie=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).checkChange=a.checkChange.bind(Object(m.a)(a)),a.radioChange=a.radioChange.bind(Object(m.a)(a)),a}return Object(u.a)(n,[{key:"findCategory",value:function(e,t){if(null===e||null===t)return null;for(var n=0;n<e.length;n++)if(t===e[n][0])return e[n];return null}},{key:"checkChange",value:function(e){var t=e.currentTarget.value,n=e.currentTarget.checked;null!==this.props.toggleElement&&this.props.toggleElement({key:t,visible:n})}},{key:"radioChange",value:function(e){null!==this.props.toggleElement&&this.props.toggleElement({key:e.target.value,visible:!0})}},{key:"renderCheckboxes",value:function(e){var t=this;return e.map((function(e,n){return Object(x.jsxs)("div",{children:[Object(x.jsx)(K.a,{label:e.name,value:e.key,control:Object(x.jsx)(ae.a,{checked:e.visible,onChange:t.checkChange})}),Object(x.jsx)("p",{style:{margin:0,padding:0},children:e.description}),Object(x.jsx)("img",{src:e.thumbnail,alt:e.name})]},n)}))}},{key:"renderRadios",value:function(e){return e.map((function(e,t){return Object(x.jsxs)("div",{children:[Object(x.jsx)(K.a,{label:e.name,value:e.key,control:Object(x.jsx)(X.a,{})}),Object(x.jsx)("p",{style:{margin:0,padding:0},children:e.description}),Object(x.jsx)("img",{src:e.thumbnail,alt:e.name})]},t)}))}},{key:"renderRadioSelect",value:function(e,t){for(var n="",a=0;a<t.length;a++)t[a].visible&&(n=t[a].key);return Object(x.jsx)(Y.a,{name:e,value:n,onChange:this.radioChange,children:this.renderRadios(t)})}},{key:"renderCategory",value:function(e){var t=e.name.toUpperCase();return t.endsWith("S")||(t+="S"),Object(x.jsxs)(U.a,{sx:{p:1,m:1,opacity:.8},children:[Object(x.jsx)(Q.a,{component:"legend",children:t}),Object(x.jsx)(q.a,{children:e.singleSelect?this.renderRadioSelect(e.name,e.items):this.renderCheckboxes(e.items)})]})}},{key:"render",value:function(){var e=this.findCategory(this.props.elementGroups,this.props.elementCategory);return null===e?null:Object(x.jsx)(S.a,{sx:{width:.2,m:2,zIndex:"appBar",position:"absolute",right:0,top:function(e){return e.mixins.toolbar.minHeight+"px"}},children:this.renderCategory(e[1])})}}]),n}(a.Component);ie.defaultProps={elementCategory:null,elementGroups:[],toggleElement:null};var re=ie,se=n(4),oe=n(106),le=n(107),ce=n(108),de=n(109),he=n(110),ue=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).refRenderer=i.a.createRef(),a.save=a.save.bind(Object(m.a)(a)),a.animate=a.animate.bind(Object(m.a)(a)),a.loadObjectDirect=a.loadObjectDirect.bind(Object(m.a)(a)),a.loaderOk=a.loaderOk.bind(Object(m.a)(a)),a.loaderAnimOk=a.loaderAnimOk.bind(Object(m.a)(a)),a.loaderError=a.loaderError.bind(Object(m.a)(a)),a.loaderProgress=a.loaderProgress.bind(Object(m.a)(a)),a.toggleElement=a.toggleElement.bind(Object(m.a)(a)),a.setAnimationTime=a.setAnimationTime.bind(Object(m.a)(a)),a.onWindowResize=a.onWindowResize.bind(Object(m.a)(a)),a.animations=[],a.isSkinnedMesh=!1,a.loader=a.initLoader(e.loadPath),a.exporterSTL=new de.a,a.exporterOBJ=new he.a,a.clock=new se.i,a.animMixer=null,a.animTime=0,a.scene=a.createScene(a.props.showGroundPlane,a.props.showLight),a}return Object(u.a)(n,[{key:"render",value:function(){return Object(x.jsx)(S.a,{ref:this.refRenderer,sx:{paddingTop:function(e){return e.mixins.toolbar.minHeight+"px"}}})}},{key:"createScene",value:function(e,t){var n=new se.kb;if(n.background=new se.j(11513775),e){var a=new se.O(new se.bb(2,2),new se.Q({color:8947848,depthWrite:!1}));a.rotation.x=-Math.PI/2,a.receiveShadow=!0,a.name="hlp_ground_plane",n.add(a)}var i=new se.s(16777215,4473924);if(i.position.set(0,5,0),n.add(i),t){var r=new se.t(i,1,16711680);r.name="hlp_hL",n.add(r)}var s=new se.l(16777215);if(s.position.set(2,2,2),n.add(s),t){var o=new se.m(s,1,16711680);o.name="hlp_dL1",n.add(o)}var l=new se.l(16777215);if(l.position.set(-2,-2,-2),n.add(l),t){var c=new se.m(l,1,16711680);c.name="hlp_dL2",n.add(c)}return n}},{key:"save",value:function(e){console.log("Saving object");var t=this.scene.clone(),n=[];return t.traverse((function(e){e.visible||(console.log("To remove",e.name,e.id,e.uuid),n.push(e.id)),e.name.startsWith("hlp_")&&n.push(e.id)})),n.forEach((function(e){var n=t.getObjectById(e);n.parent.remove(n)})),"OBJ"===e?this.exporterOBJ.parse(t):this.exporterSTL.parse(t,{binary:!0})}},{key:"componentDidMount",value:function(){var e=this.rendererDimensions();this.renderer=new se.Ab({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(e.width,e.height),this.refRenderer.current.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize),this.rendererTmb=new se.Ab({antialias:!0,alpha:!0}),this.rendererTmb.setSize(this.props.thumbnailWidth,this.props.thumbnailHeight),this.camera=new se.ab(45,e.width/e.height,.1,100),this.camera.position.set(0,.2,.1),this.controls=new ce.a(this.camera,this.renderer.domElement),this.controls.listenToKeyEvents(window),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.screenSpacePanning=!1,this.controls.minDistance=.1,this.controls.maxDistance=2,this.controls.maxPolarAngle=Math.PI/2,this.controls.target=new se.yb(0,.15,0),this.controls.update(),this.animate(),this.props.backgroundCube.length>0&&(this.scene.background=this.loadBackgroundCube(this.props.backgroundCube)),this.loadObject(this.props.object3D)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onWindowResize)}},{key:"rendererDimensions",value:function(){var e={width:window.innerWidth,height:window.innerHeight},t=getComputedStyle(this.refRenderer.current);return e.width-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),e.height-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),e}},{key:"onWindowResize",value:function(){var e=this.rendererDimensions();this.camera.aspect=e.width/e.height,this.camera.updateProjectionMatrix(),this.controls.update(),this.renderer.setSize(e.width,e.height)}},{key:"initLoader",value:function(e){var t=new le.a;t.setDecoderPath(e+"/libs/draco/");var n=new oe.a;return n.setDRACOLoader(t),n}},{key:"loadObject",value:function(e){null!==e&&this.loader.load(this.props.loadPath+e,this.loaderOk,void 0,this.loaderError)}},{key:"loadObjectDirect",value:function(e){var t=this;this.loadedObject&&(this.scene=this.createScene(this.props.showGroundPlane,this.props.showLight),null!==this.props.availableElements&&this.props.availableElements([]),null!==this.props.availableAnimations&&this.props.availableAnimations([]));var n=new FileReader;n.addEventListener("load",(function(e){t.loader.parse(e.target.result,"",t.loaderOk)})),n.addEventListener("error",(function(t){console.error("Error loading",e.name,t)})),n.readAsArrayBuffer(e)}},{key:"loadAnimation",value:function(e){null!==e&&this.loader.load(this.props.loadPath+e,this.loaderAnimOk,void 0,this.loaderError)}},{key:"loadBackgroundCube",value:function(e){if(null!==e)return(new se.k).setPath(this.props.loadPath).load(e)}},{key:"animate",value:function(){if(requestAnimationFrame(this.animate),null!==this.animMixer)if(this.props.animSingleStep)this.animMixer.setTime(this.animTime);else{var e=this.clock.getDelta();this.animMixer.update(e/2)}this.renderer.render(this.scene,this.camera)}},{key:"loaderOk",value:function(e){var t=this;this.loadedObject=e.scene.children[0],this.isSkinnedMesh=!1,this.loadedObject.traverse((function(e){t.isSkinnedMesh||e.isSkinnedMesh&&(t.isSkinnedMesh=!0)}));var n=this.findOptional(),a=new se.Q({color:2254370,flatShading:!0}),i=new se.d;if(this.loadedObject.traverse((function(e){e.frustumCulled=!1,e.isMesh&&(e.material=a,t.isSkinnedMesh&&i.expandByObject(e))})),this.isSkinnedMesh||i.expandByObject(this.loadedObject),this.scene.add(this.loadedObject),this.props.showBoundingBox){var r=new se.e(i,16711680);r.name="hlp_bounding_box",this.scene.add(r)}if(this.props.showSkeleton){var s=new se.mb(this.loadedObject);s.name="hlp_skeleton",s.visible=!0,this.scene.add(s)}if(this.cameraToBBox(i,this.camera,this.controls,1),this.createElementThumbs(n,this.props.thumbnailWidth/this.props.thumbnailHeight),this.showDefaultOptional(n),this.animMixer=new se.b(this.loadedObject),null!==this.props.availableElements&&this.props.availableElements(n),this.animations=[],this.isSkinnedMesh)for(var o=0;o<this.props.animPoses.length;o++)this.loadAnimation(this.props.animPoses[o])}},{key:"loaderProgress",value:function(e){console.log(e.loaded/e.total*100+"% loaded")}},{key:"loaderError",value:function(e){console.error(e)}},{key:"loaderAnimOk",value:function(e){var t=e.animations[0],n=0,a=0;t.tracks.forEach((function(e){e.times.length>n&&(n=e.times.length,a=e.times[0])})),this.props.animDisableMove&&(t.tracks=t.tracks.filter((function(e){return"mixamorigHips.position"!==e.name})));var i=this.animMixer.clipAction(t);if(i.enabled=!1,i.play(),this.animations.push({name:t.name,action:i,frames:n,frameTime:a}),this.props.animPoses.length===this.animations.length){var r=[];r.push({name:"None",enabled:!0,frames:0,frameTime:0});for(var s=0;s<this.animations.length;s++)r.push({name:this.animations[s].name,enabled:!1,frames:this.animations[s].frames,frameTime:this.animations[s].frameTime});null!==this.props.availableAnimations&&this.props.availableAnimations(r)}}},{key:"findOptional",value:function(){var e={};this.loadedObject.traverse((function(t){if(t.name.startsWith("opts_")||t.name.startsWith("optm_")){var n=t.name.split("_"),a=n[1];if(void 0===e[a]){var i="opts"===n[0];e[a]={name:a,singleSelect:i,items:[]}}var r=n[1]+" "+n[2];t.userData&&t.userData.Title&&t.userData.Title.length>0&&(r=t.userData.Title);var s="";t.userData&&t.userData.Description&&t.userData.Description.length>0&&(s=t.userData.Description),e[a].items.push({key:t.name,name:r,description:s,visible:!1,thumbnail:null})}}));var t=Object.entries(e).sort((function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0}));return t.forEach((function(e){e[1].items=e[1].items.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}))})),t}},{key:"showDefaultOptional",value:function(e){var t=this;this.loadedObject.traverse((function(e){!e.isMesh||e.name.startsWith("opts_")||e.name.startsWith("optm_")||(e.visible=!0)})),e.forEach((function(e){1!==e[1].items.length&&(e[1].items[0].visible=!0,t.toggleElement(e[1].items[0]))}))}},{key:"toggleElement",value:function(e){this.loadedObject.traverse((function(t){t.name===e.key&&(t.visible=e.visible)}))}},{key:"toggleAnimation",value:function(e){for(var t=0;t<this.animations.length;t++)this.animations[t].action.enabled=this.animations[t].name===e;this.animTime=0}},{key:"setAnimationTime",value:function(e){this.animTime=e}},{key:"cameraToBBox",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.2,i=new se.yb,r=new se.yb;e.getSize(i),e.getCenter(r);var s=Math.max(i.x,i.y,i.z),o=s/(2*Math.atan(Math.PI*t.fov/360)),l=o/t.aspect,c=a*Math.max(o,l);if(t.near=c/100,t.far=100*c,t.updateProjectionMatrix(),null!==n){var d=n.target.clone().sub(t.position).normalize().multiplyScalar(c);n.maxDistance=2*c,n.target.copy(r),t.position.copy(n.target).sub(d),n.update()}else{var h=new se.yb(0,0,c),u=r.clone().add(h);t.position.set(u.x,u.y,u.z),t.lookAt(r)}}},{key:"createElementThumbs",value:function(e,t){var n=this,a=new se.ab(75,t,.1,100);a.position.set(0,.2,20),this.loadedObject.traverse((function(e){e.isMesh&&(e.visible=!1)})),this.scene.traverse((function(e){e.name.startsWith("hlp_")&&(e.visible=!1)}));var i=this.scene.background;this.scene.background=null;e.forEach((function(e){e[1].items.forEach((function(e){if(!("".length>0)||e.key.startsWith("")){var t=null,i=new se.d;n.loadedObject.traverse((function(n){n.name===e.key&&(t=n)})),n.isSkinnedMesh?i.copy(t.geometry.boundingBox):i.expandByObject(t),n.cameraToBBox(i,a,null,1.2),t.visible=!0,n.rendererTmb.render(n.scene,a),e.thumbnail=n.rendererTmb.domElement.toDataURL(),t.visible=!1}}))})),this.scene.background=i,this.scene.traverse((function(e){e.name.startsWith("hlp_")&&(e.visible=!0)}))}}]),n}(a.Component);ue.defaultProps={loadPath:null,object3D:null,animPoses:null,showBoundingBox:!1,showSkeleton:!1,showGroundPlane:!0,showLight:!1,backgroundCube:null,availableElements:null,availableAnimations:null,animSingleStep:!0,animDisableMove:!0,thumbnailWidth:256,thumbnailHeight:256};var me=ue,be=n(91),pe=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={elementCategory:"",elementGroups:[],animations:[]},a.refDrawerMenu=i.a.createRef(),a.refView3D=i.a.createRef(),a.toggleDrawer=a.toggleDrawer.bind(Object(m.a)(a)),a.save=a.save.bind(Object(m.a)(a)),a.availableElements=a.availableElements.bind(Object(m.a)(a)),a.toggleElement=a.toggleElement.bind(Object(m.a)(a)),a.availableAnimations=a.availableAnimations.bind(Object(m.a)(a)),a.toggleAnimation=a.toggleAnimation.bind(Object(m.a)(a)),a.setAnimationTime=a.setAnimationTime.bind(Object(m.a)(a)),a.selectElementCategory=a.selectElementCategory.bind(Object(m.a)(a)),a.loadDragNDrop=a.loadDragNDrop.bind(Object(m.a)(a)),a.loadDragOver=a.loadDragOver.bind(Object(m.a)(a)),a}return Object(u.a)(n,[{key:"toggleDrawer",value:function(e){this.refDrawerMenu.current.toggleDrawer(e)}},{key:"save",value:function(e){var t=this.refView3D.current.save(e);switch(e){case"STL":var n=new Blob([t],{type:"application/octet-stream"});Object(be.saveAs)(n,"for-print.stl");break;case"OBJ":var a=new Blob([t],{type:"text/plain"});Object(be.saveAs)(a,"for-print.obj");break;default:console.log("Unsupported file format ->",e)}}},{key:"loadDragOver",value:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"}},{key:"loadDragNDrop",value:function(e){if(e.preventDefault(),console.log("Drag & Drop files, items:",e.dataTransfer.items.length,"files:",e.dataTransfer.files.length),"text/plain"!==e.dataTransfer.types[0])if(e.dataTransfer.items){for(var t=0;t<e.dataTransfer.items.length;t++)if("file"===e.dataTransfer.items[t].kind){var n=e.dataTransfer.items[t].getAsFile();this.refView3D.current.loadObjectDirect(n);break}}else for(var a=0;a<e.dataTransfer.files.length;a++){this.refView3D.current.loadObjectDirect(e.dataTransfer.files[a]);break}}},{key:"availableElements",value:function(e){this.setState({elementGroups:e})}},{key:"selectElementCategory",value:function(e){this.setState({elementCategory:e})}},{key:"toggleElement",value:function(e){var t=this,n=e.key.split("_"),a=this.state.elementGroups.map((function(a){if(n[1]!==a[0])return a;var i=a[1];return i.items=i.items.map((function(n){return n.key===e.key?(n.visible=e.visible,t.refView3D.current.toggleElement(n)):i.singleSelect&&(n.visible=!e.visible,t.refView3D.current.toggleElement(n)),n})),a}));this.setState({elementGroups:a})}},{key:"availableAnimations",value:function(e){this.setState({animations:e})}},{key:"toggleAnimation",value:function(e){var t=this.state.animations.map((function(t){return t.enabled=t.name===e,t}));this.refView3D.current.toggleAnimation(e),this.setState({animations:t})}},{key:"setAnimationTime",value:function(e){this.refView3D.current.setAnimationTime(e)}},{key:"render",value:function(){return Object(x.jsxs)(i.a.Fragment,{children:[Object(x.jsx)(w,{toggleDrawer:this.toggleDrawer}),Object(x.jsx)(R,{ref:this.refDrawerMenu,save:this.save}),Object(x.jsx)(me,{ref:this.refView3D,loadPath:"/3dprint-demo",object3D:"/objects/Test_model2.glb",backgroundCube:[],animPoses:["/anims/fire_rifle.gltf","/anims/hit_reaction.gltf","/anims/reloading.gltf","/anims/rifle_aiming.gltf","/anims/rifle_jump.gltf","/anims/rifle_run.gltf","/anims/run_backwards.gltf","/anims/starfe_left.gltf","/anims/starfe_right.gltf","/anims/toss_grenade.gltf","/anims/turn_left.gltf","/anims/turn_right.gltf","/anims/walking_backwards.gltf","/anims/walking.gltf"],availableElements:this.availableElements,availableAnimations:this.availableAnimations,thumbnailWidth:128,thumbnailHeight:128}),Object(x.jsx)(ne,{elementGroups:this.state.elementGroups,toggleElement:this.toggleElement,optAnimations:this.state.animations,toggleAnimation:this.toggleAnimation,setAnimationTime:this.setAnimationTime,elementCategory:this.state.elementCategory,selectElementCategory:this.selectElementCategory}),Object(x.jsx)(re,{elementCategory:this.state.elementCategory,elementGroups:this.state.elementGroups,toggleElement:this.toggleElement}),Object(x.jsx)(U.a,{onDrop:this.loadDragNDrop,onDragOver:this.loadDragOver,sx:{m:1,p:1,bottom:0,right:0,width:.2,textAlign:"center",zIndex:"appBar",position:"absolute"},children:Object(x.jsxs)(f.a,{variant:"h6",component:"p",children:["Drag & Drop",Object(x.jsx)("br",{}),"test model here"]})})]})}}]),n}(a.Component),ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,203)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),r(e),s(e)}))};s.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsxs)(l.a,{theme:d,children:[Object(x.jsx)(o.a,{enableColorScheme:!0}),Object(x.jsx)(pe,{})]})}),document.getElementById("root")),ge()}},[[139,1,2]]]);
//# sourceMappingURL=main.7fe4f079.chunk.js.map