{"version":3,"sources":["theme.js","ui/AppTools.js","ui/DrawerMenu.js","editor/View3D.js","App.js","reportWebVitals.js","index.js"],"names":["theme","createTheme","AppTools","AppBar","position","Toolbar","variant","IconButton","edge","color","onClick","this","props","toggleDrawer","Typography","Component","defaultProps","DrawerMenu","bind","toggleElement","save","state","isOpen","e","type","key","setState","fileFormat","currentTarget","dataset","value","console","error","name","target","visible","checked","availableElements","map","el","index","FormControlLabel","label","control","Switch","onChange","Drawer","anchor","open","onClose","Box","p","component","Divider","List","ListItem","ListItemButton","ListItemIcon","ListItemText","primary","FormControl","FormLabel","FormGroup","renderSwitches","View3D","refRenderer","React","createRef","animate","loaderOk","loaderError","loaderProgress","exporterSTL","STLExporter","exporterOBJ","OBJExporter","scene","THREE","dirLight1","set","add","dirLight2","ambientLight","loader","GLTFLoader","ref","log","forSave","clone","remove","traverse","o","id","uuid","push","forEach","getObjectById","parent","parse","binary","camera","window","innerWidth","innerHeight","y","z","renderer","setSize","current","appendChild","domElement","controls","OrbitControls","listenToKeyEvents","enableDamping","dampingFactor","screenSpacePanning","minDistance","maxDistance","maxPolarAngle","Math","PI","update","loadObject","object3D","filePath","loadPath","load","undefined","requestAnimationFrame","render","aspect","updateProjectionMatrix","gltf","i","children","length","obj","includes","loadedObject","xhr","loaded","total","sc","backgroundCube","App","elements","refDrawerMenu","refView3D","data","blobSTL","Blob","saveAs","blobOBJ","newElements","Fragment","process","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","ThemeProvider","CssBaseline","enableColorScheme","document","getElementById"],"mappings":"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","file":"static/js/main.74d2964f.chunk.js","sourcesContent":["//import { red } from '@mui/material/colors';\nimport { createTheme } from '@mui/material/styles';\n\n// A custom theme for this app\nconst theme = createTheme({\n//\tpalette: {\n//\t\tprimary: {\n//\t\t\tmain: '#556cd6',\n//\t\t},\n//\t\tsecondary: {\n//\t\t\tmain: '#19857b',\n//\t\t},\n//\t\terror: {\n//\t\t\tmain: red.A400,\n//\t\t},\n//\t},\n});\n\nexport default theme;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport AppBar from '@mui/material/AppBar';\nimport Toolbar from '@mui/material/Toolbar';\nimport Typography from '@mui/material/Typography';\nimport IconButton from '@mui/material/IconButton';\nimport MenuIcon from '@mui/icons-material/Menu';\n\nclass AppTools extends Component {\n\n\trender() {\n\t\treturn (\n\t\t\t<AppBar position=\"fixed\">\n\t\t\t\t<Toolbar variant=\"regular\">\n\t\t\t\t\t<IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\" onClick={this.props.toggleDrawer}>\n\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t<Typography variant=\"h6\" color=\"inherit\">3D Print demo</Typography>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t);\n\t}\n}\n\nAppTools.defaultProps = {\n\ttoggleDrawer: null\n}\n\nAppTools.propTypes = {\n\ttoggleDrawer: PropTypes.func\n}\n\nexport default AppTools;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Divider from '@mui/material/Divider';\nimport Drawer from '@mui/material/Drawer';\nimport Box from '@mui/material/Box';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemButton from '@mui/material/ListItemButton';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport ListItemText from '@mui/material/ListItemText';\nimport Typography from '@mui/material/Typography';\nimport Save from '@mui/icons-material/Save';\nimport FormLabel from '@mui/material/FormLabel';\nimport FormControl from '@mui/material/FormControl';\nimport FormGroup from '@mui/material/FormGroup';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport Switch from '@mui/material/Switch';\n\n\nclass DrawerMenu extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.toggleDrawer = this.toggleDrawer.bind(this);\n\t\tthis.toggleElement = this.toggleElement.bind(this);\n\t\tthis.save = this.save.bind(this);\n\t\tthis.state = {\n\t\t\tisOpen: false\n\t\t}\n\t}\n\n\ttoggleDrawer(e) {\n\t\tif (e.type === 'keydown' && (e.key === 'Tab' || e.key === 'Shift')) {\n\t\t\treturn;\n\t\t}\n\t\tthis.setState({ isOpen: !this.state.isOpen });\n\t}\n\n\tsave(e) {\n\t\tif (null === this.props.save) {\n\t\t\tconsole.error(\"No save handler set\");\n\t\t\treturn;\n\t\t}\n\t\t// read from \"data-value\" attribute\n\t\tlet fileFormat = e.currentTarget.dataset.value;\n\t\tif (!fileFormat) {\n\t\t\tfileFormat = \"STL\" // default to STL format\n\t\t}\n\t\tthis.setState({ isOpen:false });\n\t\tthis.props.save(fileFormat);\n\t}\n\n\ttoggleElement(e) {\n\t\tthis.props.toggleElement({\n\t\t\tname: e.target.name,\n\t\t\tvisible: e.target.checked \n\t\t});\n\t}\n\n\trenderSwitches() {\n\t\treturn this.props.availableElements.map((el, index) => {\n\t\t\treturn (\n\t\t\t\t<FormControlLabel key={index} label={el.name}\n\t\t\t\t\tcontrol={<Switch checked={el.visible} onChange={this.toggleElement} name={el.name} />}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Drawer anchor=\"left\" open={this.state.isOpen} onClose={this.toggleDrawer}>\n\t\t\t\t<Box p={1}>\n\t\t\t\t\t<Typography variant=\"h4\" component=\"h4\">Main menu</Typography>\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<List component=\"nav\" aria-label=\"main selector\">\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemButton onClick={this.save} data-value=\"STL\">\n\t\t\t\t\t\t\t\t<ListItemIcon><Save /></ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Save STL for print\" />\n\t\t\t\t\t\t\t</ListItemButton>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemButton onClick={this.save} data-value=\"OBJ\">\n\t\t\t\t\t\t\t\t<ListItemIcon><Save /></ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Save OBJ for print\" />\n\t\t\t\t\t\t\t</ListItemButton>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t</List>\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<FormControl component=\"fieldset\" variant=\"standard\">\n\t\t\t\t\t<FormLabel component=\"legend\">Elements on/off</FormLabel>\n\t\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t\t{this.renderSwitches()}\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t</FormControl>\n\t\t\t\t</Box>\n\t\t\t</Drawer>\n\t\t);\n\t}\n}\n\nDrawerMenu.defaultProps = {\n\tsave: null,\n\tavailableElements: [],\n\ttoggleElement: null\n}\n\nDrawerMenu.propTypes = {\n\tsave: PropTypes.func,\n\tavailableElements: PropTypes.array,\n\ttoggleElement: PropTypes.func\n}\n\nexport default DrawerMenu;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport * as THREE from \"three\";\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport { STLExporter } from 'three/examples/jsm/exporters/STLExporter.js';\nimport { OBJExporter } from 'three/examples/jsm/exporters/OBJExporter.js';\n\nclass View3D extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.refRenderer = React.createRef();\n\t\t// methods\n\t\tthis.save = this.save.bind(this);\n\t\tthis.animate = this.animate.bind(this);\n\t\tthis.loaderOk = this.loaderOk.bind(this);\n\t\tthis.loaderError = this.loaderError.bind(this);\n\t\tthis.loaderProgress = this.loaderProgress.bind(this);\n\t\tthis.toggleElement = this.toggleElement.bind(this);\n\n\t\t// Init exporters\n\t\tthis.exporterSTL = new STLExporter();\n\t\tthis.exporterOBJ = new OBJExporter();\n\n\t\t// Init default scene\n\t\tthis.scene = new THREE.Scene();\n\n\t\t// Add light\n\t\tthis.dirLight1 = new THREE.DirectionalLight( 0xffffff );\n\t\tthis.dirLight1.position.set( 1, 1, 1 );\n\t\tthis.scene.add( this.dirLight1 );\n\n\t\tthis.dirLight2 = new THREE.DirectionalLight( 0xffffff );\n\t\tthis.dirLight2.position.set( -1, -1, -1 );\n\t\tthis.scene.add( this.dirLight2 );\n\n\t\tthis.ambientLight = new THREE.AmbientLight( 0x222222 );\n\t\tthis.scene.add( this.ambientLight );\n\n\t\t// init object loader\n\t\tthis.loader = new GLTFLoader();\n\t}\n\n\t// just empty div to add renderer\n\trender() {\n\t\treturn (<div ref={this.refRenderer} />);\n\t}\n\n\t// extract scene and save object\n\tsave(fileFormat) {\n\t\tconsole.log(\"Saving object\");\n\t\t// clone scene to remove hidden\n\t\tlet forSave = this.scene.clone();\n\t\t// find invisible to remove\n\t\tlet remove = [];\n\t\tforSave.traverse(function(o){\n\t\t\tif (!o.visible) {\n\t\t\t\tconsole.log(\"To remove\", o.name, o.id, o.uuid);\n\t\t\t\tremove.push(o.id);\n\t\t\t}\n\t\t});\n\t\t// finally remove invisible\n\t\tremove.forEach(id => {\n\t\t\tlet o = forSave.getObjectById(id);\n\t\t\to.parent.remove(o);\n\t\t});\n\t\t// return cleaned\n\t\tswitch (fileFormat) {\n\t\t\tcase \"STL\":\n\t\t\t\treturn this.exporterSTL.parse(forSave, {binary:true});\n\t\t\tcase \"OBJ\":\n\t\t\t\treturn this.exporterOBJ.parse(forSave)\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn this.exporterSTL.parse(forSave, {binary:true});\n\t}\n\n\t// init three.js renderer\n\tcomponentDidMount() {\n\t\tthis.camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 100 );\n\t\tthis.camera.position.y = 0.20;\n\t\tthis.camera.position.z = 0.10;\n\n\t\tthis.renderer = new THREE.WebGLRenderer();\n\t\tthis.renderer.setSize( window.innerWidth, window.innerHeight );\n\t\t// use ref as a mount point of the Three.js scene instead of the document.body\n\t\tthis.refRenderer.current.appendChild( this.renderer.domElement );\n\n\t\t// controls\n\t\tthis.controls = new OrbitControls( this.camera, this.renderer.domElement );\n\t\tthis.controls.listenToKeyEvents( window ); // optional\n\t\tthis.controls.enableDamping = true; // an animation loop is required when either damping or auto-rotation are enabled\n\t\tthis.controls.dampingFactor = 0.05;\n\t\tthis.controls.screenSpacePanning = false;\n\t\tthis.controls.minDistance = 0.22;\n\t\tthis.controls.maxDistance = 2;\n\t\tthis.controls.maxPolarAngle = Math.PI / 2;\n\t\tthis.controls.target = new THREE.Vector3(0, 0.15, 0);\n\t\tthis.controls.update();\n\n\t\t// start animation\n\t\tthis.animate();\n\n\t\t// kickstart loading\n\t\tthis.loadObject(this.props.object3D);\n\t\t//if (null === this.props.object3D) {\n\t\t//\treturn;\n\t\t//}\n\t\t//this.loader.load(\n\t\t//\tthis.props.object3D,\n\t\t//\tthis.loaderOk,\n\t\t//\tundefined, //this.loaderProgress,\n\t\t//\tthis.loaderError\n\t\t//);\n\t}\n\n\tloadObject(filePath){\n\t\tif (null === filePath) {\n\t\t\treturn;\n\t\t}\n\t\tif (null === this.props.loadPath) {\n\t\t\treturn;\n\t\t}\n\t\tthis.loader.load(\n\t\t\tthis.props.loadPath + filePath,\n\t\t\tthis.loaderOk,\n\t\t\tundefined, //this.loaderProgress,\n\t\t\tthis.loaderError\n\t\t);\n\t}\n\n\tanimate() {\n\t\trequestAnimationFrame( this.animate );\n\t\tthis.renderer.render( this.scene, this.camera );\n\t};\n\n\t// TODO: fix resizing \n\tonWindowResize() {\n\t\tthis.camera.aspect = window.innerWidth / window.innerHeight;\n\t\tthis.camera.updateProjectionMatrix();\n\t\tthis.renderer.setSize( window.innerWidth, window.innerHeight );\n\t}\n\n\t// called when object is loaded\n\tloaderOk(gltf) {\n\t\tconsole.log(\"Object loaded\");\n\t\t//this.scene.add( gltf.scene );\n\t\tlet el = [];\n\t\tfor (let i = 0; i < gltf.scene.children.length; i++) {\n\t\t\tlet obj = gltf.scene.children[i];\n\t\t\t//console.log(obj);\n\t\t\t//console.log(obj.name);\n\n\t\t\t// skip main model marked with \"-main\" in name\n\t\t\tif (obj.name.includes(\"-main\")) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t// make non make element invisible\n\t\t\tobj.visible = false;\n\t\t\t// add to list for hide/show\n\t\t\tel.push({\n\t\t\t\tname: obj.name,\n\t\t\t\tvisible: false\n\t\t\t});\n\t\t}\n\t\t//this.scene.add(gltf.scene);\n\t\tthis.loadedObject = gltf.scene;\n\t\tthis.scene.add(this.loadedObject);\n\n\t\t// Call changed list of models\n\t\tif (null !== this.props.availableElements) {\n\t\t\tthis.props.availableElements(el);\n\t\t}\n\t}\n\n\t// called while loading is progressing\n\tloaderProgress (xhr) {\n\t\tconsole.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );\n\t}\n\n\t// called when object load fails\n\tloaderError(error) {\n\t\tconsole.error(error);\n\t}\n\n\t// toggle visible element\n\t// check for traversing scene..\n\t// https://github.com/mrdoob/three.js/blob/dev/examples/jsm/exporters/STLExporter.js\n\ttoggleElement(el) {\n\t\tconsole.log(\"Toggle visible\", el);\n\t\tlet sc = this.loadedObject;\n\t\tfor (let i = 0; i < sc.children.length; i++) {\n\t\t\tif (sc.children[i].name === el.name) {\n\t\t\t\tsc.children[i].visible = el.visible;\n\t\t\t}\n\t\t}\n\t}\n}\n\nView3D.defaultProps = {\n\tloadPath: null,\n\tobject3D: null,\n\tbackgroundCube: null,\n\tavailableElements: null\n}\n\nView3D.propTypes = {\n\tloadPath: PropTypes.string,\n\tobject3D: PropTypes.string,\n\tbackgroundCube: PropTypes.array,\n\tavailableElements: PropTypes.func\n}\n\nexport default View3D;","import React, { Component } from 'react';\nimport AppTools from './ui/AppTools';\nimport DrawerMenu from './ui/DrawerMenu';\nimport View3D from './editor/View3D';\nimport { saveAs } from 'file-saver';\n\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\telements: [],\n\t\t}\n\t\tthis.refDrawerMenu = React.createRef();\n\t\tthis.refView3D = React.createRef();\n\t\tthis.toggleDrawer = this.toggleDrawer.bind(this);\n\t\tthis.save = this.save.bind(this);\n\t\tthis.availableElements = this.availableElements.bind(this);\n\t\tthis.toggleElement = this.toggleElement.bind(this);\n\t}\n\n\ttoggleDrawer(e) {\n\t\tthis.refDrawerMenu.current.toggleDrawer(e);\n\t}\n\n\tsave(fileFormat) {\n\t\t// get data from scene\n\t\tlet data = this.refView3D.current.save(fileFormat);\n\t\t//console.log(\"Data for save ->\", data);\n\t\tswitch (fileFormat) {\n\t\t\tcase \"STL\":\n\t\t\t\tlet blobSTL = new Blob( [data], { type : 'application/octet-stream' } ); \n\t\t\t\tsaveAs(blobSTL, \"for-print.stl\");\n\t\t\t\tbreak;\n\t\t\tcase \"OBJ\":\n\t\t\t\tlet blobOBJ = new Blob( [ data ], { type: 'text/plain' } );\n\t\t\t\tsaveAs(blobOBJ, \"for-print.obj\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log(\"Unsupported file format ->\",fileFormat);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Get list of elements to hide and show\n\tavailableElements(elements) {\n\t\tconsole.log(elements);\n\t\tthis.setState({elements:elements});\n\t}\n\n\ttoggleElement(el) {\n\t\tlet newElements = this.state.elements.map((e)=>{\n\t\t\tif (e.name === el.name) {\n\t\t\t\te.visible = el.visible;\n\t\t\t}\n\t\t\treturn e;\n\t\t});\n\t\tthis.setState({elements:newElements});\n\t\tthis.refView3D.current.toggleElement(el);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<AppTools toggleDrawer={this.toggleDrawer} />\n\t\t\t\t<DrawerMenu ref={this.refDrawerMenu} save={this.save} availableElements={this.state.elements} toggleElement={this.toggleElement} />\n\t\t\t\t<View3D ref={this.refView3D} loadPath={process.env.PUBLIC_URL} object3D=\"/objects/solider-demo.glb\" availableElements={this.availableElements} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n\tif (onPerfEntry && onPerfEntry instanceof Function) {\n\t\timport('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n\t\t\tgetCLS(onPerfEntry);\n\t\t\tgetFID(onPerfEntry);\n\t\t\tgetFCP(onPerfEntry);\n\t\t\tgetLCP(onPerfEntry);\n\t\t\tgetTTFB(onPerfEntry);\n\t\t});\n\t}\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport { ThemeProvider } from '@mui/material/styles';\nimport theme from './theme';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<ThemeProvider theme={theme}>\n\t\t\t<CssBaseline enableColorScheme />\n\t\t\t{/* The rest of your application */}\n\t\t\t<App />\n\t\t</ThemeProvider>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}