{"version":3,"sources":["theme.js","ui/AppTools.js","ui/DrawerMenu.js","editor/View3D.js","App.js","reportWebVitals.js","index.js"],"names":["theme","createTheme","AppTools","AppBar","position","Toolbar","variant","IconButton","edge","color","onClick","this","props","toggleDrawer","Typography","Component","defaultProps","DrawerMenu","bind","toggleElement","save","state","isOpen","e","type","key","setState","fileFormat","currentTarget","dataset","value","console","error","name","target","visible","checked","availableElements","map","el","index","FormControlLabel","label","control","Switch","onChange","Drawer","anchor","open","onClose","Box","p","component","Divider","List","ListItem","ListItemButton","ListItemIcon","ListItemText","primary","FormControl","FormLabel","FormGroup","renderSwitches","View3D","refRenderer","React","createRef","animate","loaderOk","loaderError","loaderProgress","onWindowResize","exporterSTL","STLExporter","exporterOBJ","OBJExporter","scene","THREE","dirLight1","set","add","dirLight2","ambientLight","loader","GLTFLoader","ref","sx","paddingTop","mixins","toolbar","minHeight","log","forSave","clone","remove","traverse","o","id","uuid","push","forEach","getObjectById","parent","parse","binary","rsize","rendererDimensions","camera","width","height","y","z","renderer","setSize","current","appendChild","domElement","window","addEventListener","controls","OrbitControls","listenToKeyEvents","enableDamping","dampingFactor","screenSpacePanning","minDistance","maxDistance","maxPolarAngle","Math","PI","update","loadPath","background","loadBackgroundCube","backgroundCube","reflectionCube","cubeMaterial1","envMap","loadObject","object3D","removeEventListener","d","innerWidth","innerHeight","rst","getComputedStyle","parseFloat","paddingLeft","paddingRight","paddingBottom","aspect","updateProjectionMatrix","filePath","load","undefined","filesCube","setPath","requestAnimationFrame","render","gltf","i","children","length","obj","includes","material","loadedObject","xhr","loaded","total","sc","App","elements","refDrawerMenu","refView3D","data","blobSTL","Blob","saveAs","blobOBJ","newElements","Fragment","process","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","ThemeProvider","CssBaseline","enableColorScheme","document","getElementById"],"mappings":"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","file":"static/js/main.7fc88f06.chunk.js","sourcesContent":["//import { red } from '@mui/material/colors';\nimport { createTheme } from '@mui/material/styles';\n\n// A custom theme for this app\nconst theme = createTheme({\n//\tpalette: {\n//\t\tprimary: {\n//\t\t\tmain: '#556cd6',\n//\t\t},\n//\t\tsecondary: {\n//\t\t\tmain: '#19857b',\n//\t\t},\n//\t\terror: {\n//\t\t\tmain: red.A400,\n//\t\t},\n//\t},\n});\n\nexport default theme;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport AppBar from '@mui/material/AppBar';\nimport Toolbar from '@mui/material/Toolbar';\nimport Typography from '@mui/material/Typography';\nimport IconButton from '@mui/material/IconButton';\nimport MenuIcon from '@mui/icons-material/Menu';\n\nclass AppTools extends Component {\n\n\trender() {\n\t\treturn (\n\t\t\t<AppBar position=\"fixed\">\n\t\t\t\t<Toolbar variant=\"regular\">\n\t\t\t\t\t<IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\" onClick={this.props.toggleDrawer}>\n\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t<Typography variant=\"h6\" color=\"inherit\">3D Print demo</Typography>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t);\n\t}\n}\n\nAppTools.defaultProps = {\n\ttoggleDrawer: null\n}\n\nAppTools.propTypes = {\n\ttoggleDrawer: PropTypes.func\n}\n\nexport default AppTools;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Divider from '@mui/material/Divider';\nimport Drawer from '@mui/material/Drawer';\nimport Box from '@mui/material/Box';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemButton from '@mui/material/ListItemButton';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport ListItemText from '@mui/material/ListItemText';\nimport Typography from '@mui/material/Typography';\nimport Save from '@mui/icons-material/Save';\nimport FormLabel from '@mui/material/FormLabel';\nimport FormControl from '@mui/material/FormControl';\nimport FormGroup from '@mui/material/FormGroup';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport Switch from '@mui/material/Switch';\n\n\nclass DrawerMenu extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.toggleDrawer = this.toggleDrawer.bind(this);\n\t\tthis.toggleElement = this.toggleElement.bind(this);\n\t\tthis.save = this.save.bind(this);\n\t\tthis.state = {\n\t\t\tisOpen: false\n\t\t}\n\t}\n\n\ttoggleDrawer(e) {\n\t\tif (e.type === 'keydown' && (e.key === 'Tab' || e.key === 'Shift')) {\n\t\t\treturn;\n\t\t}\n\t\tthis.setState({ isOpen: !this.state.isOpen });\n\t}\n\n\tsave(e) {\n\t\tif (null === this.props.save) {\n\t\t\tconsole.error(\"No save handler set\");\n\t\t\treturn;\n\t\t}\n\t\t// read from \"data-value\" attribute\n\t\tlet fileFormat = e.currentTarget.dataset.value;\n\t\tif (!fileFormat) {\n\t\t\tfileFormat = \"STL\" // default to STL format\n\t\t}\n\t\tthis.setState({ isOpen:false });\n\t\tthis.props.save(fileFormat);\n\t}\n\n\ttoggleElement(e) {\n\t\tthis.props.toggleElement({\n\t\t\tname: e.target.name,\n\t\t\tvisible: e.target.checked \n\t\t});\n\t}\n\n\trenderSwitches() {\n\t\treturn this.props.availableElements.map((el, index) => {\n\t\t\treturn (\n\t\t\t\t<FormControlLabel key={index} label={el.name}\n\t\t\t\t\tcontrol={<Switch checked={el.visible} onChange={this.toggleElement} name={el.name} />}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Drawer anchor=\"left\" open={this.state.isOpen} onClose={this.toggleDrawer}>\n\t\t\t\t<Box p={1}>\n\t\t\t\t\t<Typography variant=\"h4\" component=\"h4\">Main menu</Typography>\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<List component=\"nav\" aria-label=\"main selector\">\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemButton onClick={this.save} data-value=\"STL\">\n\t\t\t\t\t\t\t\t<ListItemIcon><Save /></ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Save STL for print\" />\n\t\t\t\t\t\t\t</ListItemButton>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemButton onClick={this.save} data-value=\"OBJ\">\n\t\t\t\t\t\t\t\t<ListItemIcon><Save /></ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Save OBJ for print\" />\n\t\t\t\t\t\t\t</ListItemButton>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t</List>\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<FormControl component=\"fieldset\" variant=\"standard\">\n\t\t\t\t\t<FormLabel component=\"legend\">Elements on/off</FormLabel>\n\t\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t\t{this.renderSwitches()}\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t</FormControl>\n\t\t\t\t</Box>\n\t\t\t</Drawer>\n\t\t);\n\t}\n}\n\nDrawerMenu.defaultProps = {\n\tsave: null,\n\tavailableElements: [],\n\ttoggleElement: null\n}\n\nDrawerMenu.propTypes = {\n\tsave: PropTypes.func,\n\tavailableElements: PropTypes.array,\n\ttoggleElement: PropTypes.func\n}\n\nexport default DrawerMenu;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport * as THREE from \"three\";\nimport Box from '@mui/material/Box';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport { STLExporter } from 'three/examples/jsm/exporters/STLExporter.js';\nimport { OBJExporter } from 'three/examples/jsm/exporters/OBJExporter.js';\n\nclass View3D extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.refRenderer = React.createRef();\n\t\t// methods\n\t\tthis.save = this.save.bind(this);\n\t\tthis.animate = this.animate.bind(this);\n\t\tthis.loaderOk = this.loaderOk.bind(this);\n\t\tthis.loaderError = this.loaderError.bind(this);\n\t\tthis.loaderProgress = this.loaderProgress.bind(this);\n\t\tthis.toggleElement = this.toggleElement.bind(this);\n\t\tthis.onWindowResize = this.onWindowResize.bind(this);\n\n\t\t// Init exporters\n\t\tthis.exporterSTL = new STLExporter();\n\t\tthis.exporterOBJ = new OBJExporter();\n\n\t\t// Init default scene\n\t\tthis.scene = new THREE.Scene();\n\n\t\t// Add light\n\t\tthis.dirLight1 = new THREE.DirectionalLight( 0xffffff );\n\t\tthis.dirLight1.position.set( 1, 1, 1 );\n\t\tthis.scene.add( this.dirLight1 );\n\n\t\tthis.dirLight2 = new THREE.DirectionalLight( 0xffffff );\n\t\tthis.dirLight2.position.set( -1, -1, -1 );\n\t\tthis.scene.add( this.dirLight2 );\n\n\t\tthis.ambientLight = new THREE.AmbientLight( 0x222222 );\n\t\tthis.scene.add( this.ambientLight );\n\n\t\t// init object loader\n\t\tthis.loader = new GLTFLoader();\n\t}\n\n\t// just empty div to add renderer\n\trender() {\n\t\t// this is to make container below toolbar\n\t\t// theme access is possible through function generating sx\n\t\treturn (\n\t\t\t<Box\n\t\t\t\tref={this.refRenderer} \n\t\t\t\tsx={{\n\t\t\t\t\tpaddingTop: (theme) => theme.mixins.toolbar.minHeight + 'px'\n\t\t\t\t}} \n\t\t\t/>\n\t\t);\n\t}\n\n\t// extract scene and save object\n\tsave(fileFormat) {\n\t\tconsole.log(\"Saving object\");\n\t\t// clone scene to remove hidden\n\t\tlet forSave = this.scene.clone();\n\t\t// find invisible to remove\n\t\tlet remove = [];\n\t\tforSave.traverse(function(o){\n\t\t\tif (!o.visible) {\n\t\t\t\tconsole.log(\"To remove\", o.name, o.id, o.uuid);\n\t\t\t\tremove.push(o.id);\n\t\t\t}\n\t\t});\n\t\t// finally remove invisible\n\t\tremove.forEach(id => {\n\t\t\tlet o = forSave.getObjectById(id);\n\t\t\to.parent.remove(o);\n\t\t});\n\t\t// return cleaned\n\t\tswitch (fileFormat) {\n\t\t\tcase \"STL\":\n\t\t\t\treturn this.exporterSTL.parse(forSave, {binary:true});\n\t\t\tcase \"OBJ\":\n\t\t\t\treturn this.exporterOBJ.parse(forSave)\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn this.exporterSTL.parse(forSave, {binary:true});\n\t}\n\n\t// init three.js renderer\n\tcomponentDidMount() {\n\t\t// renderer element\n\t\tconst rsize = this.rendererDimensions();\n\n\t\t// setup camera\n\t\tthis.camera = new THREE.PerspectiveCamera( 75, rsize.width / rsize.height, 0.1, 100 );\n\t\tthis.camera.position.y = 0.20;\n\t\tthis.camera.position.z = 0.10;\n\n\t\tthis.renderer = new THREE.WebGLRenderer();\n\t\t//this.renderer.setPixelRatio( window.devicePixelRatio );\t// doubles pixels?!?\n\t\tthis.renderer.setSize(rsize.width, rsize.height);\n\t\t// use ref as a mount point of the Three.js scene instead of the document.body\n\t\tthis.refRenderer.current.appendChild( this.renderer.domElement );\n\t\t// Add handler for resizing\n\t\twindow.addEventListener( 'resize', this.onWindowResize );\n\n\t\t// controls\n\t\tthis.controls = new OrbitControls( this.camera, this.renderer.domElement );\n\t\tthis.controls.listenToKeyEvents( window ); // optional\n\t\tthis.controls.enableDamping = true; // an animation loop is required when either damping or auto-rotation are enabled\n\t\tthis.controls.dampingFactor = 0.05;\n\t\tthis.controls.screenSpacePanning = false;\n\t\tthis.controls.minDistance = 0.22;\n\t\tthis.controls.maxDistance = 2;\n\t\tthis.controls.maxPolarAngle = Math.PI / 2;\n\t\tthis.controls.target = new THREE.Vector3(0, 0.15, 0);\n\t\tthis.controls.update();\n\n\t\t// start animation\n\t\tthis.animate();\n\n\t\t// can we load\n\t\tif (null === this.props.loadPath) {\n\t\t\treturn;\n\t\t}\n\t\t// kickstart loading\n\t\tthis.scene.background = this.loadBackgroundCube(this.props.backgroundCube);\n\t\tconst reflectionCube = this.loadBackgroundCube(this.props.backgroundCube);\n\t\t//const refractionCube = this.loadBackgroundCube(this.props.backgroundCube);\n\t\t//refractionCube.mapping = THREE.CubeRefractionMapping;\n\n\t\t//this.cubeMaterial3 = new THREE.MeshLambertMaterial( { color: 0xff6600, envMap: reflectionCube, combine: THREE.MixOperation, reflectivity: 0.3 } );\n\t\t//this.cubeMaterial2 = new THREE.MeshLambertMaterial( { color: 0xffee00, envMap: refractionCube, refractionRatio: 0.95 } );\n\t\tthis.cubeMaterial1 = new THREE.MeshLambertMaterial( { color: 0xffffff, envMap: reflectionCube } );\n\t\tthis.loadObject(this.props.object3D);\n\t}\n\n\tcomponentWillUnmount() {\n\t\t// remove handler for resizing\n\t\twindow.removeEventListener( 'resize', this.onWindowResize );\n\t}\n\n\trendererDimensions(){\n\t\tlet d = {\n\t\t\t//width: this.refRenderer.current.clientWidth,\n\t\t\twidth: window.innerWidth,\n\t\t\t//height: this.refRenderer.current.clientHeight\n\t\t\theight: window.innerHeight\n\t\t}\n\t\tlet rst = getComputedStyle(this.refRenderer.current);\n\t\td.width -= parseFloat(rst.paddingLeft) + parseFloat(rst.paddingRight);\n\t\td.height -= parseFloat(rst.paddingTop) + parseFloat(rst.paddingBottom);\n\t\t//console.log(d);\n\t\treturn d;\n\t}\n\n\t// TODO: fix resizing \n\tonWindowResize() {\n\t\tconst rsize = this.rendererDimensions();\n\t\tthis.camera.aspect = rsize.width / rsize.height;\n\t\tthis.camera.updateProjectionMatrix();\n\t\tthis.renderer.setSize( rsize.width, rsize.height );\n\t}\n\n\n\tloadObject(filePath){\n\t\tif (null === filePath) {\n\t\t\treturn;\n\t\t}\n\t\tthis.loader.load(\n\t\t\tthis.props.loadPath + filePath,\n\t\t\tthis.loaderOk,\n\t\t\tundefined, //this.loaderProgress,\n\t\t\tthis.loaderError\n\t\t);\n\t}\n\n\tloadBackgroundCube(filesCube) {\n\t\tif (null === filesCube) {\n\t\t\treturn;\n\t\t}\n\t\treturn new THREE.CubeTextureLoader()\n\t\t\t.setPath(this.props.loadPath)\n\t\t\t.load(filesCube);\n\t}\n\n\tanimate() {\n\t\trequestAnimationFrame( this.animate );\n\t\tthis.renderer.render( this.scene, this.camera );\n\t};\n\n\t// called when object is loaded\n\tloaderOk(gltf) {\n\t\tconsole.log(\"Object loaded\");\n\t\t// find optional elemnets\n\t\tlet el = [];\n\t\tfor (let i = 0; i < gltf.scene.children.length; i++) {\n\t\t\tlet obj = gltf.scene.children[i];\n\t\t\t//console.log(obj);\n\t\t\t//console.log(obj.name);\n\n\t\t\t// skip main model marked with \"-main\" in name\n\t\t\tif (obj.name.includes(\"-main\")) {\n\t\t\t\t// setup reflection material\n\t\t\t\t//obj.material = this.cubeMaterial3;\n\t\t\t\t//obj.material = this.cubeMaterial2;\n\t\t\t\tobj.material = this.cubeMaterial1;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t// make non make element invisible\n\t\t\tobj.visible = false;\n\t\t\t// add to list for hide/show\n\t\t\tel.push({\n\t\t\t\tname: obj.name,\n\t\t\t\tvisible: false\n\t\t\t});\n\t\t}\n\t\tthis.loadedObject = gltf.scene;\n\t\tthis.scene.add(this.loadedObject);\n\n\t\t// Call changed list of models\n\t\tif (null !== this.props.availableElements) {\n\t\t\tthis.props.availableElements(el);\n\t\t}\n\t}\n\n\t// called while loading is progressing\n\tloaderProgress (xhr) {\n\t\tconsole.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );\n\t}\n\n\t// called when object load fails\n\tloaderError(error) {\n\t\tconsole.error(error);\n\t}\n\n\t// toggle visible element\n\t// check for traversing scene..\n\t// https://github.com/mrdoob/three.js/blob/dev/examples/jsm/exporters/STLExporter.js\n\ttoggleElement(el) {\n\t\tconsole.log(\"Toggle visible\", el);\n\t\tlet sc = this.loadedObject;\n\t\tfor (let i = 0; i < sc.children.length; i++) {\n\t\t\tif (sc.children[i].name === el.name) {\n\t\t\t\tsc.children[i].visible = el.visible;\n\t\t\t}\n\t\t}\n\t}\n}\n\nView3D.defaultProps = {\n\tloadPath: null,\n\tobject3D: null,\n\tbackgroundCube: null,\n\tavailableElements: null\n}\n\nView3D.propTypes = {\n\tloadPath: PropTypes.string,\n\tobject3D: PropTypes.string,\n\tbackgroundCube: PropTypes.array,\n\tavailableElements: PropTypes.func\n}\n\nexport default View3D;","import React, { Component } from 'react';\nimport AppTools from './ui/AppTools';\nimport DrawerMenu from './ui/DrawerMenu';\nimport View3D from './editor/View3D';\nimport { saveAs } from 'file-saver';\n\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\telements: [],\n\t\t}\n\t\tthis.refDrawerMenu = React.createRef();\n\t\tthis.refView3D = React.createRef();\n\t\tthis.toggleDrawer = this.toggleDrawer.bind(this);\n\t\tthis.save = this.save.bind(this);\n\t\tthis.availableElements = this.availableElements.bind(this);\n\t\tthis.toggleElement = this.toggleElement.bind(this);\n\t}\n\n\ttoggleDrawer(e) {\n\t\tthis.refDrawerMenu.current.toggleDrawer(e);\n\t}\n\n\tsave(fileFormat) {\n\t\t// get data from scene\n\t\tlet data = this.refView3D.current.save(fileFormat);\n\t\t//console.log(\"Data for save ->\", data);\n\t\tswitch (fileFormat) {\n\t\t\tcase \"STL\":\n\t\t\t\tlet blobSTL = new Blob( [data], { type : 'application/octet-stream' } ); \n\t\t\t\tsaveAs(blobSTL, \"for-print.stl\");\n\t\t\t\tbreak;\n\t\t\tcase \"OBJ\":\n\t\t\t\tlet blobOBJ = new Blob( [ data ], { type: 'text/plain' } );\n\t\t\t\tsaveAs(blobOBJ, \"for-print.obj\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log(\"Unsupported file format ->\",fileFormat);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Get list of elements to hide and show\n\tavailableElements(elements) {\n\t\tconsole.log(elements);\n\t\tthis.setState({elements:elements});\n\t}\n\n\ttoggleElement(el) {\n\t\tlet newElements = this.state.elements.map((e)=>{\n\t\t\tif (e.name === el.name) {\n\t\t\t\te.visible = el.visible;\n\t\t\t}\n\t\t\treturn e;\n\t\t});\n\t\tthis.setState({elements:newElements});\n\t\tthis.refView3D.current.toggleElement(el);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<AppTools toggleDrawer={this.toggleDrawer} />\n\t\t\t\t<DrawerMenu ref={this.refDrawerMenu} save={this.save} availableElements={this.state.elements} toggleElement={this.toggleElement} />\n\t\t\t\t<View3D ref={this.refView3D} loadPath={process.env.PUBLIC_URL} \n\t\t\t\t\tobject3D=\"/objects/solider-demo.glb\"\n\t\t\t\t\tbackgroundCube={[\n\t\t\t\t\t\t'/textures/Brudslojan/posx.jpg',\n\t\t\t\t\t\t'/textures/Brudslojan/negx.jpg',\n\t\t\t\t\t\t'/textures/Brudslojan/posy.jpg',\n\t\t\t\t\t\t'/textures/Brudslojan/negy.jpg',\n\t\t\t\t\t\t'/textures/Brudslojan/posz.jpg',\n\t\t\t\t\t\t'/textures/Brudslojan/negz.jpg'\n\t\t\t\t\t]}\n\t\t\t\t\tavailableElements={this.availableElements} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n\tif (onPerfEntry && onPerfEntry instanceof Function) {\n\t\timport('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n\t\t\tgetCLS(onPerfEntry);\n\t\t\tgetFID(onPerfEntry);\n\t\t\tgetFCP(onPerfEntry);\n\t\t\tgetLCP(onPerfEntry);\n\t\t\tgetTTFB(onPerfEntry);\n\t\t});\n\t}\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport { ThemeProvider } from '@mui/material/styles';\nimport theme from './theme';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<ThemeProvider theme={theme}>\n\t\t\t<CssBaseline enableColorScheme />\n\t\t\t{/* The rest of your application */}\n\t\t\t<App />\n\t\t</ThemeProvider>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}